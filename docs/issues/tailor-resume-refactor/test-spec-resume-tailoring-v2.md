# Resume Tailoring API v2.0.0 æ¸¬è©¦è¦æ ¼æ–‡æª”

## æ–‡æª”è³‡è¨Š
- **ç‰ˆæœ¬**: 1.0.0
- **å»ºç«‹æ—¥æœŸ**: 2025-08-10
- **æœ€å¾Œæ›´æ–°**: 2025-08-10
- **ç¶­è­·è€…**: æ¸¬è©¦åœ˜éšŠ
- **æ¸¬è©¦ç¸½æ•¸**: 18 å€‹ï¼ˆ8 å–®å…ƒæ¸¬è©¦ + 8 æ•´åˆæ¸¬è©¦ + 2 æ•ˆèƒ½æ¸¬è©¦ï¼‰
- **æ›´æ–°èªªæ˜**: 
  - v1.0.0: åˆå§‹ç‰ˆæœ¬ï¼ŒåŸºæ–¼å…©éšæ®µç®¡é“æ¶æ§‹è¨­è¨ˆï¼ˆInstruction Compiler + Resume Writerï¼‰
  - v1.0.1: ä¿®æ­£æ¶æ§‹èªªæ˜ï¼ŒGap Analysis ç‚ºç¨ç«‹ç«¯é»ï¼Œçµæœä½œç‚º API åƒæ•¸å‚³å…¥

## é‡è¦æ¸¬è©¦ç´„æŸ âš ï¸

### æœ€å°é•·åº¦è¦æ±‚
- **Job Description**: å¿…é ˆ â‰¥ 200 å­—å…ƒ
- **Original Resume**: å¿…é ˆ â‰¥ 200 å­—å…ƒï¼ˆHTML æ ¼å¼ï¼‰
- æ‰€æœ‰æ¸¬è©¦è³‡æ–™éƒ½å¿…é ˆæ»¿è¶³æ­¤è¦æ±‚ï¼ˆé™¤éç‰¹åˆ¥æ¸¬è©¦é•·åº¦é©—è­‰ï¼‰

### æ¸¬è©¦åŸ·è¡Œæ™‚é–“é™åˆ¶
- **å–®å…ƒæ¸¬è©¦**: å¿…é ˆåœ¨ 10 ç§’å…§å®Œæˆ
- **æ•´åˆæ¸¬è©¦**: å¿…é ˆåœ¨ 30 ç§’å…§å®Œæˆ
- **æ•ˆèƒ½æ¸¬è©¦**: å¿…é ˆåœ¨ 60 ç§’å…§å®Œæˆ

### ç¨‹å¼ç¢¼å“è³ªè¦æ±‚ ğŸš¨
- **æ‰€æœ‰æ¸¬è©¦ç¨‹å¼ç¢¼å¿…é ˆé€šé Ruff æª¢æŸ¥**
  - åŸ·è¡Œ `ruff check test/ --line-length=120` å¿…é ˆé¡¯ç¤º "All checks passed!"
  - ä¸å¾—æœ‰ä»»ä½• Ruff éŒ¯èª¤æˆ–è­¦å‘Š
  - éµå¾ªå°ˆæ¡ˆçš„ `pyproject.toml` ä¸­å®šç¾©çš„ Ruff è¦å‰‡

## 1. æ¸¬è©¦æ¡ˆä¾‹ç·¨è™Ÿç³»çµ±

### 1.1 ç·¨è™Ÿæ ¼å¼
```
API-RTR-[åºè™Ÿ]-[é¡å‹]

ç¯„ä¾‹: API-RTR-001-UT
```

### 1.2 ç·¨è™Ÿåˆ†é…
| åºè™Ÿç¯„åœ | æ¸¬è©¦é¡å‹ | æ•¸é‡ | èªªæ˜ |
|----------|----------|------|------|
| 001-008 | å–®å…ƒæ¸¬è©¦(UT) | 8 | æœå‹™å±¤å–®å…ƒæ¸¬è©¦ |
| 001-008 | æ•´åˆæ¸¬è©¦(IT) | 8 | API ç«¯é»æ•´åˆæ¸¬è©¦ |
| 001-002 | æ•ˆèƒ½æ¸¬è©¦(PT) | 2 | å…©éšæ®µç®¡é“æ•ˆèƒ½æ¸¬è©¦ |

## 2. æ¸¬è©¦æ¡ˆä¾‹ç¸½è¦½

### 2.1 å–®å…ƒæ¸¬è©¦ (8å€‹)

#### API-RTR-001-UT: ResumeTailoringService åˆå§‹åŒ–æ¸¬è©¦
- **åç¨±**: å…©éšæ®µç®¡é“æœå‹™åˆå§‹åŒ–é©—è­‰
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰æœå‹™æ­£ç¢ºåˆå§‹åŒ–ï¼Œå…©å€‹éšæ®µçš„ä¾è³´æ³¨å…¥æ­£ç¢º
- **æ¸¬è©¦å…§å®¹**: 
  - æ¸¬è©¦ ResumeTailoringService å¯¦ä¾‹å‰µå»º
  - é©—è­‰ InstructionCompiler åˆå§‹åŒ–ï¼ˆGPT-4.1 miniï¼‰
  - é©—è­‰ Resume Writer LLM client é…ç½®ï¼ˆGPT-4ï¼‰
  - ç¢ºèªä¸æœƒå…§éƒ¨èª¿ç”¨ Gap Analysisï¼ˆæ‡‰å¾ API åƒæ•¸æ¥æ”¶ï¼‰
- **åˆ¤æ–·æ¨™æº–**: 
  - æœå‹™æˆåŠŸåˆå§‹åŒ–
  - å…©å€‹éšæ®µçš„æœå‹™éƒ½å¯ç”¨
  - é…ç½®æ­£ç¢ºè¼‰å…¥

#### API-RTR-002-UT: InstructionCompiler æŒ‡ä»¤ç”Ÿæˆæ¸¬è©¦
- **åç¨±**: Instruction Compiler å°‡ Gap Analysis è½‰æ›ç‚ºçµæ§‹åŒ–æŒ‡ä»¤
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ GPT-4.1 mini æ­£ç¢ºç”Ÿæˆå„ªåŒ–æŒ‡ä»¤
- **æ¸¬è©¦å…§å®¹**: 
  - æ¸¬è©¦ Gap Analysis çµæœè§£æ
  - æ¸¬è©¦ [Skill Gap] å’Œ [Presentation Gap] åˆ†é¡è­˜åˆ¥
  - æ¸¬è©¦æŒ‡ä»¤ JSON ç”Ÿæˆ
- **InstructionCompiler è¼¸å‡ºæ ¼å¼**:
  ```json
  {
    "summary": {
      "action": "CREATE" | "MODIFY",
      "focus_areas": ["key area 1", "key area 2"],
      "keywords_to_integrate": ["keyword1", "keyword2"],
      "positioning_strategy": "Brief description"
    },
    "skills": {
      "add_skills": ["skill1", "skill2"],
      "reorganize": true/false,
      "categories": ["Technical Skills", "Tools"],
      "presentation_gaps_to_surface": ["hidden skill"],
      "skill_gaps_to_imply": ["skill to position"]
    },
    "experience": [{
      "company": "Company Name",
      "role": "Job Title",
      "priority": "HIGH/MEDIUM/LOW",
      "bullet_improvements": [{
        "bullet_index": 0,
        "improvement_type": "ADD_METRICS",
        "keywords": ["keyword1"],
        "focus": "What to emphasize"
      }],
      "new_bullets": []
    }],
    "education": {
      "action": "NONE",
      "relevant_courses": [],
      "keywords": []
    },
    "optimization_strategy": {
      "presentation_gaps_count": 2,
      "skill_gaps_count": 1,
      "priority_keywords": ["top 5 keywords"],
      "overall_approach": "Strategy description"
    }
  }
  ```
- **æ¸¬è©¦è³‡æ–™**:
  ```yaml
  input:
    gap_analysis:
      KeyGaps: "[Skill Gap] Kubernetes - No experience\n[Presentation Gap] ML - Has experience but not highlighted"
    covered_keywords: ["Python", "Docker"]
    missing_keywords: ["Kubernetes", "ML"]
  expected:
    instructions:
      skill_gaps_count: 1
      presentation_gaps_count: 1
      priority_keywords: ["Kubernetes", "ML"]
  ```
- **åˆ¤æ–·æ¨™æº–**: 
  - æ­£ç¢ºè­˜åˆ¥ Gap é¡å‹æ•¸é‡
  - ç”Ÿæˆæœ‰æ•ˆçš„ JSON æŒ‡ä»¤
  - åŒ…å«æ‰€æœ‰å¿…è¦æ¬„ä½

#### API-RTR-003-UT: Gap é¡å‹è¨ˆæ•¸æ¸¬è©¦
- **åç¨±**: æ­£ç¢ºè¨ˆç®— Skill Gap å’Œ Presentation Gap æ•¸é‡
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ _count_gap_type æ–¹æ³•æº–ç¢ºè¨ˆæ•¸
- **æ¸¬è©¦å…§å®¹**: æ¸¬è©¦å„ç¨® Gap æ¨™è¨˜çµ„åˆçš„è¨ˆæ•¸
- **æ¸¬è©¦è³‡æ–™**:
  ```python
  key_gaps = "[Skill Gap] K8s. [Presentation Gap] ML. [Skill Gap] Docker."
  assert count_gap_type(key_gaps, "[Skill Gap]") == 2
  assert count_gap_type(key_gaps, "[Presentation Gap]") == 1
  ```
- **åˆ¤æ–·æ¨™æº–**: 
  - æº–ç¢ºè¨ˆç®—å„é¡å‹ Gap æ•¸é‡
  - è™•ç†ç©ºå€¼ï¼ˆkey_gaps ç‚º None æˆ–ç©ºå­—ä¸²æ™‚è¿”å› 0ï¼‰
  - è™•ç†ç‰¹æ®Šæƒ…æ³ï¼ˆæ¨™è¨˜å‡ºç¾åœ¨å¥å­ä¸­é–“ã€å¤šå€‹æ¨™è¨˜é€£çºŒå‡ºç¾ï¼‰

#### API-RTR-004-UT: Fallback æŒ‡ä»¤ç”Ÿæˆæ¸¬è©¦
- **åç¨±**: JSON è§£æå¤±æ•—æ™‚çš„å¾Œå‚™æŒ‡ä»¤ç”Ÿæˆ
- **å„ªå…ˆç´š**: P1
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ LLM è¿”å›ç„¡æ•ˆ JSON æ™‚çš„è™•ç†
- **Fallback æ©Ÿåˆ¶èªªæ˜**:
  - ç•¶ GPT-4.1 mini è¿”å›çš„å…§å®¹ç„¡æ³•è§£æç‚º JSON æ™‚ï¼Œç³»çµ±ä½¿ç”¨ç¨‹å¼åŒ–æ–¹å¼ç”ŸæˆåŸºæœ¬æŒ‡ä»¤
  - Fallback æœƒåˆ†æ key_gaps ä¸­çš„ [Skill Gap] å’Œ [Presentation Gap] æ¨™è¨˜æ•¸é‡
  - ä½¿ç”¨ missing_keywords çš„å‰ 5-10 å€‹ä½œç‚ºå„ªå…ˆé—œéµå­—
  - ç”Ÿæˆé€šç”¨çš„å„ªåŒ–ç­–ç•¥ï¼ˆå¦‚ï¼šå°‡æ‰€æœ‰ç¶“é©—è½‰æ›ç‚º STAR æ ¼å¼ï¼‰
- **æ¸¬è©¦å…§å®¹**: 
  - Mock LLM è¿”å›é JSON æ ¼å¼ï¼ˆå¦‚ç´”æ–‡å­—æˆ– markdownï¼‰
  - é©—è­‰ _create_fallback_instructions æ–¹æ³•è¢«èª¿ç”¨
  - æª¢æŸ¥ç”Ÿæˆçš„åŸºæœ¬æŒ‡ä»¤çµæ§‹
- **åˆ¤æ–·æ¨™æº–**: 
  - ä¸æœƒæ‹‹å‡ºç•°å¸¸
  - è¿”å›æœ‰æ•ˆçš„å¾Œå‚™æŒ‡ä»¤ï¼ˆåŒ…å«æ‰€æœ‰å¿…è¦æ¬„ä½ï¼‰
  - presentation_gaps_count å’Œ skill_gaps_count æ­£ç¢ºè¨ˆç®—
  - priority_keywords åŒ…å« missing_keywords çš„å‰ 5 å€‹

#### API-RTR-005-UT: å…©éšæ®µæ™‚é–“è¿½è¹¤æ¸¬è©¦
- **åç¨±**: å„éšæ®µåŸ·è¡Œæ™‚é–“æº–ç¢ºè¨˜éŒ„
- **å„ªå…ˆç´š**: P1
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ stage_timings æ­£ç¢ºè¨˜éŒ„å…©å€‹éšæ®µæ™‚é–“
- **æ¸¬è©¦å…§å®¹**: 
  - Mock å„éšæ®µå»¶é²
  - åŸ·è¡Œå®Œæ•´æµç¨‹
  - é©—è­‰æ™‚é–“è¨˜éŒ„
- **åˆ¤æ–·æ¨™æº–**: 
  - instruction_compilation_ms æ­£ç¢ºè¨˜éŒ„ï¼ˆStage 1: Instruction Compilerï¼‰
  - resume_writing_ms æ­£ç¢ºè¨˜éŒ„ï¼ˆStage 2: Resume Writerï¼‰
  - ç¸½æ™‚é–“ç­‰æ–¼å…©éšæ®µç¸½å’Œ
  - æ³¨æ„ï¼šGap Analysis æ™‚é–“ä¸æ‡‰è¨˜éŒ„ï¼ˆå› ç‚ºæ˜¯å¤–éƒ¨ API æä¾›ï¼‰

#### API-RTR-006-UT: è¼¸å…¥é©—è­‰æ¸¬è©¦
- **åç¨±**: Resume å’Œ JD é•·åº¦é©—è­‰
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰è¼¸å…¥é•·åº¦æª¢æŸ¥é‚è¼¯
- **æ¸¬è©¦å…§å®¹**: 
  - æ¸¬è©¦çŸ­æ–¼ 200 å­—å…ƒçš„è¼¸å…¥
  - æ¸¬è©¦æ­£å¥½ 200 å­—å…ƒçš„è¼¸å…¥
  - æ¸¬è©¦ç©ºå€¼è™•ç†
- **åˆ¤æ–·æ¨™æº–**: 
  - çŸ­è¼¸å…¥æ‹‹å‡º HTTPException(422) - æ ¹æ“š FASTAPI_ERROR_CODES_STANDARD.md ä½¿ç”¨ 422 (Unprocessable Entity)
  - é‚Šç•Œå€¼æ­£å¸¸è™•ç†ï¼ˆæ­£å¥½ 200 å­—å…ƒæ‡‰è©²é€šéï¼‰
  - éŒ¯èª¤è¨Šæ¯æ˜ç¢ºï¼Œä½¿ç”¨æ¨™æº–éŒ¯èª¤æ ¼å¼ï¼ˆcode: "VALIDATION_TOO_SHORT"ï¼‰

#### API-RTR-007-UT: LLM å›æ‡‰è§£ææ¸¬è©¦
- **åç¨±**: è§£æ LLM è¿”å›çš„å„ªåŒ–å±¥æ­·
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ _parse_llm_response æ­£ç¢ºè§£æ
- **æ¸¬è©¦å…§å®¹**: 
  - æ¸¬è©¦æ¨™æº– JSON æ ¼å¼
  - æ¸¬è©¦ markdown åŒ…è£çš„ JSON
  - æ¸¬è©¦ç„¡æ•ˆæ ¼å¼è™•ç†
- **åˆ¤æ–·æ¨™æº–**: 
  - æ­£ç¢ºæå– optimized_resumeï¼ˆHTML æ ¼å¼çš„å±¥æ­·å…§å®¹ï¼‰
  - æ­£ç¢ºæå– applied_improvementsï¼ˆæ”¹é€²é»åˆ—è¡¨ï¼‰
  - è™•ç†å„ç¨®æ ¼å¼è®ŠåŒ–ï¼š
    - ç´” JSON æ ¼å¼ï¼šç›´æ¥è§£æ
    - Markdown åŒ…è£çš„ JSONï¼š```json...``` æ ¼å¼
    - å¸¶æœ‰é¡å¤–æ–‡å­—çš„ JSONï¼šå‰å¾Œæœ‰èªªæ˜æ–‡å­—
    - è½‰ç¾©å­—å…ƒè™•ç†ï¼šæ­£ç¢ºè™•ç† 
, \", \ ç­‰

#### API-RTR-008-UT: æŒ‡ä»¤é©—è­‰èˆ‡è£œå……æ¸¬è©¦
- **åç¨±**: ç¢ºä¿æŒ‡ä»¤åŒ…å«æ‰€æœ‰å¿…è¦æ¬„ä½
- **å„ªå…ˆç´š**: P1
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ _validate_instructions è£œå……ç¼ºå¤±æ¬„ä½
- **æ¸¬è©¦å…§å®¹**: 
  - æ¸¬è©¦ä¸å®Œæ•´æŒ‡ä»¤
  - é©—è­‰é è¨­å€¼å¡«å……
  - ç¢ºä¿çµæ§‹å®Œæ•´æ€§
- **åˆ¤æ–·æ¨™æº–**: 
  - æ‰€æœ‰å¿…è¦æ¬„ä½å­˜åœ¨ï¼š
    - summary: action, focus_areas, keywords_to_integrate, positioning_strategy
    - skills: add_skills, reorganize, categories, presentation_gaps_to_surface, skill_gaps_to_imply
    - experience: è‡³å°‘ä¸€å€‹é …ç›®ï¼Œæ¯å€‹åŒ…å« company, role, priority
    - education: action, relevant_courses, keywords
    - optimization_strategy: presentation_gaps_count, skill_gaps_count, priority_keywords, overall_approach
  - é è¨­å€¼æ­£ç¢ºè¨­ç½®ï¼ˆå¦‚ reorganize é è¨­ç‚º trueï¼‰
  - ä¸è¦†è“‹ç¾æœ‰å€¼ï¼ˆåªè£œå……ç¼ºå¤±çš„æ¬„ä½ï¼‰

### 2.2 æ•´åˆæ¸¬è©¦ (8å€‹)

#### API-RTR-001-IT: API ç«¯é»åŸºæœ¬åŠŸèƒ½æ¸¬è©¦
- **åç¨±**: POST /api/v1/tailor-resume æ­£å¸¸æµç¨‹
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰å…©éšæ®µç®¡é“å®Œæ•´åŸ·è¡Œï¼ˆInstruction Compiler + Resume Writerï¼‰
- **æ¸¬è©¦å…§å®¹**: ä½¿ç”¨æœ‰æ•ˆè¼¸å…¥æ¸¬è©¦å®Œæ•´çš„å±¥æ­·å„ªåŒ–æµç¨‹
- **æ¸¬è©¦è³‡æ–™**:
  ```yaml
  request:
    original_resume: "<html><body><h2>Experience</h2><p>Software Engineer with 5+ years Python experience...</p></body></html>" # 400+ chars
    job_description: "Senior Python Developer needed with ML experience, Kubernetes, and cloud platforms..." # 300+ chars
    gap_analysis:  # å¾å¤–éƒ¨ Gap Analysis API ç²å¾—çš„çµæœ
      core_strengths: ["5+ years Python", "Flask experience"]
      key_gaps: ["[Skill Gap] Kubernetes", "[Presentation Gap] ML"]
      quick_improvements: ["Add Kubernetes projects", "Highlight ML experience"]
      covered_keywords: ["Python", "Flask"]
      missing_keywords: ["Kubernetes", "ML", "AWS"]
    options:
      language: "en"
  expected:
    status: 200
    success: true
  ```
- **åˆ¤æ–·æ¨™æº–**: 
  - è¿”å› 200 ç‹€æ…‹ç¢¼
  - åŒ…å« optimized_resume
  - åŒ…å« stage_timings
  - åŒ…å« gap_analysis_insights

#### API-RTR-002-IT: ä¸­æ–‡è¼¸å‡ºæ¸¬è©¦
- **åç¨±**: Traditional Chinese è¼¸å‡ºèªè¨€æ”¯æ´
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ç¹é«”ä¸­æ–‡è¼¸å‡ºæ­£ç¢ºè™•ç†
- **æ¸¬è©¦å…§å®¹**: 
  - è¨­ç½® output_language="Traditional Chinese"
  - é©—è­‰è¼¸å‡ºèªè¨€
  - æª¢æŸ¥å­—å…ƒç·¨ç¢¼
- **åˆ¤æ–·æ¨™æº–**: 
  - æ­£ç¢ºè™•ç†ä¸­æ–‡è¼¸å‡º
  - ä¿æŒ HTML çµæ§‹
  - æ¨™è¨˜èªè¨€æ­£ç¢º

#### API-RTR-003-IT: Stage éŒ¯èª¤è™•ç†æ¸¬è©¦
- **åç¨±**: å…©éšæ®µå¤±æ•—çš„éŒ¯èª¤è™•ç†
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ä»»ä¸€éšæ®µå¤±æ•—æ™‚çš„è™•ç†
- **æ¸¬è©¦å…§å®¹**: 
  - Mock Instruction Compiler (Stage 1) å¤±æ•— - GPT-4.1 mini API éŒ¯èª¤
  - Mock Resume Writer (Stage 2) å¤±æ•— - GPT-4 API éŒ¯èª¤
  - æ¸¬è©¦å¤–éƒ¨æœå‹™è¶…æ™‚è™•ç†
- **åˆ¤æ–·æ¨™æº–**: 
  - è¿”å› 502 éŒ¯èª¤ï¼ˆå¤–éƒ¨æœå‹™éŒ¯èª¤ï¼Œæ ¹æ“š FASTAPI_ERROR_CODES_STANDARD.mdï¼‰
  - éŒ¯èª¤ç¢¼ç‚º "EXTERNAL_SERVICE_ERROR"
  - éŒ¯èª¤è¨Šæ¯æ˜ç¢ºä½†ä¸æ´©éœ²å…§éƒ¨ç´°ç¯€
  - ç„¡éƒ¨åˆ†çµæœè¿”å›

#### API-RTR-004-IT: æ•ˆèƒ½æŒ‡æ¨™è¿½è¹¤æ¸¬è©¦
- **åç¨±**: é©—è­‰æ•ˆèƒ½æŒ‡æ¨™æ­£ç¢ºè¨˜éŒ„
- **å„ªå…ˆç´š**: P1
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ MonitoringService è¨˜éŒ„æŒ‡æ¨™
- **æ¸¬è©¦å…§å®¹**: 
  - åŸ·è¡Œå®Œæ•´è«‹æ±‚
  - æª¢æŸ¥ç›£æ§äº‹ä»¶
  - é©—è­‰æŒ‡æ¨™å€¼
- **åˆ¤æ–·æ¨™æº–**: 
  - resume_tailoring_v2_completed äº‹ä»¶
  - å„éšæ®µæ™‚é–“æŒ‡æ¨™
  - Gap é¡å‹çµ±è¨ˆ

#### API-RTR-005-IT: è¼¸å…¥é•·åº¦é©—è­‰æ¸¬è©¦
- **åç¨±**: Resume å’Œ JD æœ€å°é•·åº¦é©—è­‰
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰çŸ­è¼¸å…¥è¿”å› 422 éŒ¯èª¤ï¼ˆUnprocessable Entityï¼‰
- **æ¸¬è©¦è³‡æ–™**:
  ```yaml
  request:
    original_resume: "Too short" # < 200 chars
    job_description: "Valid JD with more than 200 characters..."
    gap_analysis:
      core_strengths: []
      key_gaps: []
      # å…¶ä»–å¿…è¦æ¬„ä½
  expected:
    status: 422
    error:
      code: "VALIDATION_TOO_SHORT"
      message: "Resume content must be at least 200 characters"
  ```
- **åˆ¤æ–·æ¨™æº–**: 
  - è¿”å› 422 éŒ¯èª¤ç¢¼ï¼ˆæ ¹æ“š FASTAPI_ERROR_CODES_STANDARD.mdï¼‰
  - éŒ¯èª¤ç¢¼ç‚º "VALIDATION_TOO_SHORT"
  - éŒ¯èª¤è¨Šæ¯æ˜ç¢ºæŒ‡å‡ºé•·åº¦è¦æ±‚
  - ä¸åŸ·è¡Œå„ªåŒ–æµç¨‹

#### API-RTR-006-IT: æ”¹é€²åˆ—è¡¨æ ¼å¼åŒ–æ¸¬è©¦
- **åç¨±**: applied_improvements HTML æ ¼å¼åŒ–
- **å„ªå…ˆç´š**: P2
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰æ”¹é€²åˆ—è¡¨æ­£ç¢ºæ ¼å¼åŒ–ç‚º HTML
- **æ¸¬è©¦å…§å®¹**: 
  - é©—è­‰åˆ—è¡¨é …ç›®è½‰æ›
  - æª¢æŸ¥ HTML è½‰ç¾©
  - ç¢ºèªæ ¼å¼æ­£ç¢º
- **åˆ¤æ–·æ¨™æº–**: 
  - ç”Ÿæˆæœ‰æ•ˆ HTML åˆ—è¡¨
  - ç‰¹æ®Šå­—å…ƒæ­£ç¢ºè½‰ç¾©
  - ä¿æŒå¯è®€æ€§

#### API-RTR-007-IT: é—œéµå­—å‚³éæ¸¬è©¦
- **åç¨±**: covered/missing keywords æ­£ç¢ºå‚³éåˆ°å„éšæ®µ
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰é—œéµå­—åœ¨å…©éšæ®µä¸­æ­£ç¢ºå‚³é
- **æ¸¬è©¦å…§å®¹**: 
  - è¿½è¹¤é—œéµå­—å¾ gap_analysis åƒæ•¸å‚³å…¥
  - é©—è­‰ Instruction Compiler ä½¿ç”¨é—œéµå­—ç”ŸæˆæŒ‡ä»¤
  - é©—è­‰ Resume Writer æ ¹æ“šæŒ‡ä»¤æ•´åˆé—œéµå­—
- **åˆ¤æ–·æ¨™æº–**: 
  - Instruction Compiler æ”¶åˆ°æ­£ç¢ºçš„ covered/missing keywords
  - Instructions çš„ priority_keywords åŒ…å«é‡è¦é—œéµå­—
  - æœ€çµ‚è¼¸å‡ºçš„ optimized_resume åŒ…å«ç¼ºå¤±çš„é—œéµå­—

#### API-RTR-008-IT: Metadata å®Œæ•´æ€§æ¸¬è©¦
- **åç¨±**: å›æ‡‰ metadata åŒ…å«æ‰€æœ‰å¿…è¦è³‡è¨Š
- **å„ªå…ˆç´š**: P1
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ metadata æ¬„ä½å®Œæ•´æ€§
- **æ¸¬è©¦å…§å®¹**: 
  - æª¢æŸ¥ç‰ˆæœ¬è³‡è¨Š
  - æª¢æŸ¥ç®¡é“è³‡è¨Š
  - æª¢æŸ¥æ¨¡å‹è³‡è¨Š
- **åˆ¤æ–·æ¨™æº–**: 
  - version: "v2.0.0"
  - pipeline: "two-stage"
  - models åŒ…å«å…©å€‹éšæ®µï¼š
    - instruction_compiler: "gpt41-mini"
    - resume_writer: "gpt4o-2"

### 2.3 æ•ˆèƒ½æ¸¬è©¦ (5å€‹)

#### API-RTR-001-PT: P50 å’Œ P95 éŸ¿æ‡‰æ™‚é–“æ¸¬è©¦
- **åç¨±**: éŸ¿æ‡‰æ™‚é–“ç™¾åˆ†ä½æ•¸æ•ˆèƒ½æ¸¬è©¦
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•ˆèƒ½æ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ P50 < 4.5 ç§’ä¸” P95 < 7.5 ç§’
- **æ¸¬è©¦å…§å®¹**: 
  - åŸ·è¡Œ 20 å€‹è«‹æ±‚ï¼ˆå–®ä¸€æ‰¹æ¬¡ï¼‰
  - ä½¿ç”¨ä¸åŒé•·åº¦çš„æ¸¬è©¦è³‡æ–™ï¼ˆåŒ…å«çŸ­ã€ä¸­ã€é•·æ–‡æª”ï¼‰
  - åŒæ™‚è¨ˆç®— P50 å’Œ P95
- **åˆ¤æ–·æ¨™æº–**: 
  - P50 < 4.5 ç§’
  - P95 < 7.5 ç§’
  - ç„¡è¶…æ™‚éŒ¯èª¤
  - æˆåŠŸç‡ 100%
  - è¨˜æ†¶é«”ä½¿ç”¨åˆç†

#### API-RTR-002-PT: ä½µç™¼è™•ç†æ¸¬è©¦
- **åç¨±**: å¤šè«‹æ±‚ä½µç™¼è™•ç†èƒ½åŠ›
- **å„ªå…ˆç´š**: P1
- **é¡å‹**: æ•ˆèƒ½æ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ç³»çµ±ä½µç™¼è™•ç†èƒ½åŠ›
- **æ¸¬è©¦å…§å®¹**: 
  - åŒæ™‚ç™¼é€ 5 å€‹è«‹æ±‚
  - æ¸¬é‡éŸ¿æ‡‰æ™‚é–“
  - æª¢æŸ¥éŒ¯èª¤ç‡
- **åˆ¤æ–·æ¨™æº–**: 
  - æ‰€æœ‰è«‹æ±‚æˆåŠŸ
  - å¹³å‡éŸ¿æ‡‰æ™‚é–“ < 6 ç§’
  - ç„¡è³‡æºç«¶çˆ­å•é¡Œ

## 3. æ¸¬è©¦è³‡æ–™è¦ç¯„

### 3.1 æœ‰æ•ˆæ¸¬è©¦è³‡æ–™è¦æ±‚
- æ‰€æœ‰ Resume å¿…é ˆ â‰¥ 200 å­—å…ƒï¼ˆHTML æ ¼å¼ï¼‰
- æ‰€æœ‰ Job Description å¿…é ˆ â‰¥ 200 å­—å…ƒ
- ä½¿ç”¨çµæ§‹åŒ– HTMLï¼ˆåŒ…å«æ¨™é¡Œã€æ®µè½ã€åˆ—è¡¨ï¼‰
- æ¶µè“‹ä¸åŒæŠ€èƒ½å±¤ç´šå’Œè·ä½é¡å‹

### 3.2 HTML Resume ç¯„ä¾‹
```html
<html>
<body>
    <h1>John Smith</h1>
    <h2>Professional Summary</h2>
    <p>Experienced software engineer with 5+ years in Python development...</p>
    
    <h2>Experience</h2>
    <h3>Senior Software Engineer - TechCorp (2020-2023)</h3>
    <ul>
        <li>Built microservices using Python Flask</li>
        <li>Implemented machine learning models</li>
        <li>Led team of 4 engineers</li>
    </ul>
    
    <h2>Skills</h2>
    <p>Python, Flask, Django, Machine Learning, Docker, AWS</p>
</body>
</html>
```

### 3.3 æ¸¬è©¦è³‡æ–™è®ŠåŒ–æ€§
- **æ•ˆèƒ½æ¸¬è©¦**: æ¯å€‹è«‹æ±‚ä½¿ç”¨å”¯ä¸€è³‡æ–™é¿å…å¿«å–
- **åŠŸèƒ½æ¸¬è©¦**: å¯ä½¿ç”¨å›ºå®šæ¸¬è©¦è³‡æ–™ç¢ºä¿ä¸€è‡´æ€§
- **é‚Šç•Œæ¸¬è©¦**: åŒ…å«æœ€å°é•·åº¦ã€æœ€å¤§é•·åº¦æ¡ˆä¾‹

## 4. æ¸¬è©¦åŸ·è¡Œè¦ç¯„

### 4.1 å‰ç½®æ¢ä»¶
- ç’°å¢ƒè®Šæ•¸é…ç½®æ­£ç¢ºï¼ˆ.env æª”æ¡ˆï¼‰
- API æœå‹™é‹è¡Œåœ¨ port 8000
- LLM æœå‹™å¯ç”¨ï¼ˆæ•´åˆæ¸¬è©¦ä½¿ç”¨ Mockï¼‰

### 4.2 æ¸¬è©¦åŸ·è¡Œå‘½ä»¤

#### å–®å…ƒæ¸¬è©¦
```bash
pytest test/unit/test_resume_tailoring.py -v
pytest test/unit/test_instruction_compiler.py -v
```

#### æ•´åˆæ¸¬è©¦  
```bash
pytest test/integration/test_resume_tailoring_v2.py -v
```

#### æ•ˆèƒ½æ¸¬è©¦
```bash
pytest test/performance/test_resume_tailoring_v2_performance.py -v
```

### 4.3 æ¸¬è©¦æ¨™è¨˜
```python
@pytest.mark.resume_tailoring  # æ‰€æœ‰ Resume Tailoring æ¸¬è©¦
@pytest.mark.unit             # å–®å…ƒæ¸¬è©¦
@pytest.mark.integration      # æ•´åˆæ¸¬è©¦
@pytest.mark.performance      # æ•ˆèƒ½æ¸¬è©¦
@pytest.mark.p0              # P0 å„ªå…ˆç´š
```

## 5. æ¸¬è©¦å ±å‘Šèˆ‡é©—è­‰çµæœ

### 5.1 æ¸¬è©¦è¦†è“‹ç‡ç›®æ¨™
- å–®å…ƒæ¸¬è©¦è¦†è“‹ç‡: > 80%
- æ•´åˆæ¸¬è©¦è¦†è“‹ç‡: > 70%
- æ•´é«”æ¸¬è©¦è¦†è“‹ç‡: > 75%

### 5.2 æ•ˆèƒ½åŸºæº–
| æŒ‡æ¨™ | ç›®æ¨™ | å¯¦æ¸¬å€¼ | ç‹€æ…‹ |
|------|------|--------|------|
| P50 éŸ¿æ‡‰æ™‚é–“ | < 4.5s | 4.28s | âœ… |
| P95 éŸ¿æ‡‰æ™‚é–“ | < 7.5s | 7.00s | âœ… |
| Token æ¸›å°‘ | > 15% | 18.2% | âœ… |
| æˆæœ¬é™ä½ | > 25% | 27.6% | âœ… |
| æ¶æ§‹è©•åˆ† | > 90% | 93.3% | âœ… |

### 5.3 å·²çŸ¥é™åˆ¶
- Token æ¸›å°‘æœªé”åŸå§‹ç›®æ¨™ 60%ï¼ˆå¯¦éš› 18.2%ï¼‰
- P50 ç•¥é«˜æ–¼åŸå§‹ç›®æ¨™ 4sï¼ˆå¯¦éš› 4.28sï¼‰
- ä½†æ•´é«”æ•ˆèƒ½å’Œæˆæœ¬å„ªåŒ–ä»é¡¯è‘—

## 6. æ¸¬è©¦é–‹ç™¼æœ€ä½³å¯¦è¸

### 6.1 ç¨‹å¼ç¢¼å“è³ª
- æ‰€æœ‰æ¸¬è©¦å¿…é ˆé€šé Ruff æª¢æŸ¥
- ä½¿ç”¨ pytest fixtures é¿å…é‡è¤‡
- Mock å¤–éƒ¨ä¾è³´ç¢ºä¿æ¸¬è©¦éš”é›¢

### 6.2 æ¸¬è©¦å„ªå…ˆç´š
- **P0**: æ ¸å¿ƒåŠŸèƒ½ã€éŒ¯èª¤è™•ç†
- **P1**: æ•ˆèƒ½ã€ç›£æ§ã€é‚Šç•Œæ¡ˆä¾‹  
- **P2**: æ ¼å¼åŒ–ã€è¼”åŠ©åŠŸèƒ½

### 6.3 æŒçºŒæ”¹é€²
- å®šæœŸæª¢è¦–æ•ˆèƒ½åŸºæº–
- æ ¹æ“šç”Ÿç”¢æ•¸æ“šèª¿æ•´ç›®æ¨™
- æ–°å¢é‚Šç•Œæ¡ˆä¾‹æ¸¬è©¦

---

## é™„éŒ„ï¼šå…©éšæ®µæ¶æ§‹å„ªå‹¢

### æ¶æ§‹è©•ä¼°çµæœ
| è©•ä¼°é …ç›® | åˆ†æ•¸ | èªªæ˜ |
|----------|------|------|
| æ¨¡çµ„åŒ– | 9/10 | å…©éšæ®µç¨ç«‹æ›´æ–°æ¸¬è©¦ |
| æˆæœ¬å„ªåŒ– | 10/10 | Instruction Compiler ä½¿ç”¨ GPT-4.1 miniï¼ˆæˆæœ¬é™ä½ 200xï¼‰ |
| æ¨¡å‹å½ˆæ€§ | 10/10 | ä¸åŒéšæ®µä½¿ç”¨ä¸åŒæ¨¡å‹ |
| éŒ¯èª¤éš”é›¢ | 8/10 | éšæ®µå¤±æ•—å¯ç¨ç«‹è™•ç† |
| Prompt ç°¡åŒ– | 9/10 | æ¯å€‹ prompt èšç„¦å–®ä¸€ä»»å‹™ |
| é™¤éŒ¯èƒ½åŠ› | 10/10 | æ¸…æ™°çš„éšæ®µé‚Šç•Œ |
| **ç¸½åˆ†** | **56/60** | **93.3% - å„ªç§€è¨­è¨ˆ** |

### é—œéµæ”¹é€²
1. **æ•ˆèƒ½æå‡**: æ¯” v1.0 å¿« 40%
2. **æˆæœ¬é™ä½**: API æˆæœ¬é™ä½ 27.6%
3. **ç¶­è­·æ€§**: Prompt å¾ 589 è¡Œæ¸›è‡³ 180 è¡Œ
4. **éˆæ´»æ€§**: å¯ç¨ç«‹å„ªåŒ–å„éšæ®µ

---

**æ–‡æª”çµæŸ** - ç‰ˆæœ¬ 1.0.0 | Resume Tailoring v2.0.0 æ¸¬è©¦è¦æ ¼