# å®Œæ•´æ¸¬è©¦è¦æ ¼æ–‡æª” - Index Cal & Gap Analysis

## æ–‡æª”è³‡è¨Š
- **ç‰ˆæœ¬**: 2.1.0
- **å»ºç«‹æ—¥æœŸ**: 2025-08-03
- **æœ€å¾Œæ›´æ–°**: 2025-08-16
- **æ–‡æª”åç¨±**: TEST_SPEC_GAP_ANALYZE.md (åŸå: TEST_SPECIFICATION_COMPLETE.md)
- **ç¶­è­·è€…**: AI Resume Advisor Team
- **æ¸¬è©¦ç¸½æ•¸**: 67 å€‹æ ¸å¿ƒæ¸¬è©¦ + 4 å€‹ç‰¹æ®Šæ¸¬è©¦
  - Gap Analysis: 25 UT + 31 IT = 56 å€‹
  - Course Availability: 7 UT + 4 IT = 11 å€‹
  - æ•ˆèƒ½æ¸¬è©¦: 2 å€‹
  - E2E æ¸¬è©¦: 2 å€‹
- **æ›´æ–°èªªæ˜**: 
  - v1.0.2: æ–°å¢æ•ˆèƒ½æ¸¬è©¦å¿«é€ŸåŸ·è¡ŒæŒ‡å—
  - v1.0.3: æ›´æ–°æ•ˆèƒ½æ¸¬è©¦å¯¦ä½œï¼ˆå¹³è¡ŒåŸ·è¡Œã€P95 20å€‹æ¨£æœ¬ï¼‰
  - v1.0.4: ç§»é™¤ API-GAP-004-E2Eï¼ˆèˆ‡ 001 åŠŸèƒ½é‡è¤‡ï¼‰
  - v1.0.5: æ•ˆèƒ½æ¸¬è©¦é‡æ–°åˆ†é¡ - ç§»é™¤ 3 å€‹å½æ•ˆèƒ½æ¸¬è©¦ï¼Œç§»è‡³æ•´åˆæ¸¬è©¦ (PT: 5â†’2, IT: 14â†’17)
  - v1.0.6: æ•ˆèƒ½æ¸¬è©¦é‡æ–°åˆ†é¡ - ç§»å‹• 3 å€‹æ¸¬è©¦è‡³æ•´åˆæ¸¬è©¦
  - v1.0.7: æ–°å¢éŒ¯èª¤è™•ç†æ¸¬è©¦æ¡ˆä¾‹ - æ–°å¢ 10 å€‹æ•´åˆæ¸¬è©¦ (IT: 17â†’27)
  - v1.0.8: åˆä½µæ•ˆèƒ½æ¸¬è©¦ - åˆä½µ API-GAP-001-PT å’Œ API-GAP-002-PTï¼ŒåŒæ™‚è¨ˆç®— P50/P95 (PT: 2â†’1)
  - v1.0.9: ç§»é™¤éƒ¨åˆ†æˆåŠŸæ¸¬è©¦ - åˆªé™¤ API-GAP-003-E2Eï¼Œèˆ‡ç”¢å“ç­–ç•¥ã€Œå®Œå…¨å¤±æ•—ã€ä¸€è‡´ (E2E: 3â†’2)
  - v1.0.10: æ–°å¢ Resume Structure Analysis æ¸¬è©¦æ¡ˆä¾‹ (UT: 20â†’25, IT: 27â†’30)
  - v1.0.11: æ–°å¢ Course Availability Check æ¸¬è©¦æ¡ˆä¾‹ - 7 å€‹å–®å…ƒæ¸¬è©¦ + 4 å€‹æ•´åˆæ¸¬è©¦ + 1 å€‹æ•ˆèƒ½æ¸¬è©¦ (UT: 25â†’27, IT: 30â†’31, PT: 1â†’2)
  - v2.0.0: æ–‡æª”æ”¹åç‚º TEST_SPEC_GAP_ANALYZE.md
  - v2.1.0: æ–°å¢å®Œæ•´æ€§èƒ½æ¸¬è©¦å¥—ä»¶ performance_test_suite.py

## é‡è¦æ¸¬è©¦ç´„æŸ âš ï¸

### æœ€å°é•·åº¦è¦æ±‚
- **Job Description**: å¿…é ˆ â‰¥ 200 å­—å…ƒ
- **Resume**: å¿…é ˆ â‰¥ 200 å­—å…ƒï¼ˆå»ºè­°ä½¿ç”¨ HTML æ ¼å¼ï¼‰
- æ‰€æœ‰æ¸¬è©¦è³‡æ–™éƒ½å¿…é ˆæ»¿è¶³æ­¤è¦æ±‚ï¼ˆé™¤éç‰¹åˆ¥æ¸¬è©¦é•·åº¦é©—è­‰ï¼‰

### æ¸¬è©¦åŸ·è¡Œæ™‚é–“é™åˆ¶
- **å–®å…ƒæ¸¬è©¦ + æ•´åˆæ¸¬è©¦**: å¿…é ˆåœ¨ 20 ç§’å…§å®Œæˆ
- **æ•ˆèƒ½æ¸¬è©¦ + ç«¯å°ç«¯æ¸¬è©¦**: å¿…é ˆåœ¨ 90 ç§’å…§å®Œæˆ

### ç¨‹å¼ç¢¼å“è³ªè¦æ±‚ ğŸš¨
- **æ‰€æœ‰æ¸¬è©¦ç¨‹å¼ç¢¼å¿…é ˆé€šé Ruff æª¢æŸ¥**
  - åŸ·è¡Œ `ruff check test/ --line-length=120` å¿…é ˆé¡¯ç¤º "All checks passed!"
  - ä¸å¾—æœ‰ä»»ä½• Ruff éŒ¯èª¤æˆ–è­¦å‘Š
  - éµå¾ªå°ˆæ¡ˆçš„ `pyproject.toml` ä¸­å®šç¾©çš„ Ruff è¦å‰‡
- **æ’°å¯«æ¸¬è©¦å‰è«‹å…ˆç¢ºèª Ruff é…ç½®**
  - ç¢ºèª `pyproject.toml` ä¸­çš„ `[tool.ruff.lint.per-file-ignores]` è¨­å®š
  - æ¸¬è©¦æª”æ¡ˆå…è¨±çš„ä¾‹å¤–ï¼šS101 (assert), RUF001/RUF002 (ä¸­æ–‡å…¨å½¢ç¬¦è™Ÿ), S105 (æ¸¬è©¦å¯†é‘°)

## 1. æ¸¬è©¦æ¡ˆä¾‹ç·¨è™Ÿç³»çµ±

### 1.1 ç·¨è™Ÿæ ¼å¼
```
API-GAP-[åºè™Ÿ]-[é¡å‹]

ç¯„ä¾‹: API-GAP-001-UT
```

### 1.2 ç·¨è™Ÿåˆ†é…ï¼ˆæ›´æ–°ç‰ˆï¼‰
| åºè™Ÿç¯„åœ | æ¸¬è©¦é¡å‹ | æ•¸é‡ | èªªæ˜ |
|----------|----------|------|------|
| 001-025 | Gap Analysis å–®å…ƒæ¸¬è©¦(UT) | 25 | Gap Analysis æœå‹™å±¤æ¸¬è©¦ |
| 001-031 | Gap Analysis æ•´åˆæ¸¬è©¦(IT) | 31 | API ç«¯é»æ•´åˆæ¸¬è©¦ï¼ˆå«éŒ¯èª¤è™•ç†ï¼‰ |
| 001-007 | Course Availability å–®å…ƒæ¸¬è©¦(UT) | 7 | èª²ç¨‹æª¢æŸ¥æœå‹™æ¸¬è©¦ |
| 001-004 | Course Availability æ•´åˆæ¸¬è©¦(IT) | 4 | èª²ç¨‹ API æ•´åˆæ¸¬è©¦ |
| 001-002 | æ•ˆèƒ½æ¸¬è©¦(PT) | 2 | çœŸå¯¦ Azure æœå‹™æ•ˆèƒ½æ¸¬è©¦ |
| 001-002 | ç«¯å°ç«¯æ¸¬è©¦(E2E) | 2 | å®Œæ•´æµç¨‹æ¸¬è©¦ |
| **ç¸½è¨ˆ** | **æ‰€æœ‰æ¸¬è©¦** | **71** | **67 æ ¸å¿ƒ + 4 ç‰¹æ®Š** |

**é‡è¦è®Šæ›´èªªæ˜**:
- **æ•ˆèƒ½æ¸¬è©¦é‡æ–°åˆ†é¡**: API-GAP-003/004/005-PT å·²ç§»è‡³æ•´åˆæ¸¬è©¦ (API-GAP-015/017/016-IT)
- **åˆ†é¡åŸå› **: é€™äº›æ¸¬è©¦é©—è­‰ Python æ‡‰ç”¨å±¤è¡Œç‚ºï¼ˆè³‡æºæ± ã€å¿«å–ï¼‰ï¼Œè€Œé Azure æœå‹™æ•ˆèƒ½
- **å¯¦éš›åŸ·è¡Œ**: æ•ˆèƒ½æ¸¬è©¦ç¾åœ¨åªåŸ·è¡Œ 1 å€‹çœŸå¯¦çš„ Azure OpenAI æ•ˆèƒ½æ¸¬è©¦ (åŒæ™‚è¨ˆç®— P50/P95)

## 2. æ¸¬è©¦æ¡ˆä¾‹ç¸½è¦½

### 2.1 Gap Analysis å–®å…ƒæ¸¬è©¦ (25å€‹)

#### API-GAP-001-UT: CombinedAnalysisServiceV2 åˆå§‹åŒ–æ¸¬è©¦
- **åç¨±**: çµ±ä¸€åˆ†ææœå‹™åˆå§‹åŒ–é©—è­‰
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰æœå‹™æ­£ç¢ºåˆå§‹åŒ–ï¼Œä¾è³´æ³¨å…¥æ­£ç¢º
- **æ¸¬è©¦å…§å®¹**: æ¸¬è©¦æœå‹™å¯¦ä¾‹å‰µå»ºã€é…ç½®åƒæ•¸è¼‰å…¥ã€ä¾è³´æ³¨å…¥
- **æ¸¬è©¦è³‡æ–™**: 
  ```yaml
  input:
    enable_partial_results: true
    cache_ttl_minutes: 60
  expected:
    service_initialized: true
    dependencies_injected: true
  ```
- **åˆ¤æ–·æ¨™æº–**: 
  - æœå‹™æˆåŠŸåˆå§‹åŒ–
  - é…ç½®æ­£ç¢ºè¼‰å…¥
  - ä¾è³´æœå‹™å¯ç”¨

#### API-GAP-002-UT: ResourcePoolManager åˆå§‹åŒ–æ¸¬è©¦
- **åç¨±**: è³‡æºæ± ç®¡ç†å™¨åˆå§‹åŒ–å’Œé å»ºç«‹
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰è³‡æºæ± é å»ºç«‹æœ€å°æ•¸é‡å®¢æˆ¶ç«¯
- **æ¸¬è©¦å…§å®¹**: åˆå§‹åŒ– ResourcePoolManagerã€å‘¼å« initialize()ã€é©—è­‰é å»ºç«‹å®¢æˆ¶ç«¯
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. åˆå§‹åŒ– ResourcePoolManager(min_size=2, max_size=10)
  2. å‘¼å« initialize()
  3. é©—è­‰æ± ä¸­æœ‰ 2 å€‹é å»ºç«‹çš„å®¢æˆ¶ç«¯
- **åˆ¤æ–·æ¨™æº–**: 
  - è³‡æºæ± æ­£ç¢ºåˆå§‹åŒ–
  - æ± ä¸­æœ‰æ­£ç¢ºæ•¸é‡çš„é å»ºç«‹å®¢æˆ¶ç«¯
  - å®¢æˆ¶ç«¯ç‹€æ…‹æ­£å¸¸

#### API-GAP-003-UT: è³‡æºæ± ç²å–å®¢æˆ¶ç«¯æ¸¬è©¦
- **åç¨±**: å¾è³‡æºæ± ç²å–å’Œæ­¸é‚„å®¢æˆ¶ç«¯
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰å®¢æˆ¶ç«¯æ­£ç¢ºç²å–å’Œæ­¸é‚„
- **æ¸¬è©¦å…§å®¹**: ä½¿ç”¨ get_client() context managerã€é©—è­‰å®¢æˆ¶ç«¯æœ‰æ•ˆæ€§ã€ç¢ºèªæ­¸é‚„æ©Ÿåˆ¶
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. ä½¿ç”¨ get_client() context manager
  2. é©—è­‰ç²å¾—æœ‰æ•ˆå®¢æˆ¶ç«¯
  3. é€€å‡º context å¾Œé©—è­‰å®¢æˆ¶ç«¯æ­¸é‚„
- **åˆ¤æ–·æ¨™æº–**: 
  - æˆåŠŸç²å–æœ‰æ•ˆå®¢æˆ¶ç«¯
  - å®¢æˆ¶ç«¯å¯æ­£å¸¸ä½¿ç”¨
  - é€€å‡ºå¾Œå®¢æˆ¶ç«¯æ­£ç¢ºæ­¸é‚„æ± ä¸­

#### API-GAP-004-UT: è³‡æºæ± é”åˆ°ä¸Šé™æ¸¬è©¦
- **åç¨±**: è³‡æºæ± é”åˆ°æœ€å¤§å®¹é‡æ™‚çš„è¡Œç‚º
- **å„ªå…ˆç´š**: P1
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰é”åˆ° max_size æ™‚ç­‰å¾…å¯ç”¨å®¢æˆ¶ç«¯
- **æ¸¬è©¦å…§å®¹**: å¡«æ»¿è³‡æºæ± ã€å˜—è©¦ç²å–é¡å¤–å®¢æˆ¶ç«¯ã€é©—è­‰ç­‰å¾…è¡Œç‚º
- **åˆ¤æ–·æ¨™æº–**: 
  - è³‡æºæ± é”åˆ°ä¸Šé™æ™‚é˜»å¡
  - å®¢æˆ¶ç«¯é‡‹æ”¾å¾Œå¯ç¹¼çºŒç²å–
  - ç„¡è³‡æºæ´©æ¼

#### API-GAP-005-UT: ä¸¦è¡ŒåŸ·è¡Œ Phase 1 æ¸¬è©¦
- **åç¨±**: Phase 1 ä¸¦è¡Œ embedding ç”Ÿæˆ
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ resume å’Œ JD embedding ä¸¦è¡Œç”Ÿæˆ
- **æ¸¬è©¦å…§å®¹**: æ¸¬è©¦ TaskGroup ä¸¦è¡ŒåŸ·è¡Œ resume å’Œ JD embedding ç”Ÿæˆ
- **æ¸¬è©¦è³‡æ–™**:
  ```yaml
  input:
    resume: "<h3>Senior Software Engineer</h3><p>10+ years of experience in full-stack development, specializing in <strong>Python</strong>, <strong>FastAPI</strong>, and microservices architecture.</p><ul><li>Led multiple teams in delivering scalable enterprise solutions</li><li>Expertise in cloud technologies (AWS, Azure)</li><li>Containerization (Docker, Kubernetes)</li><li>DevOps practices</li></ul><p>Strong background in system design and performance optimization.</p>" # 400+ chars HTML
    job_description: "We are seeking a Senior Python Developer with 8+ years of experience to join our growing team. The ideal candidate will have strong expertise in FastAPI, microservices, and cloud platforms. Required skills include Python, FastAPI, Docker, Kubernetes, AWS/Azure, CI/CD, and database design. Experience with React and frontend technologies is a plus." # 350+ chars
  ```
- **åˆ¤æ–·æ¨™æº–**: 
  - å…©å€‹ embedding ä»»å‹™ä¸¦è¡ŒåŸ·è¡Œ
  - åŸ·è¡Œæ™‚é–“å°æ–¼ä¸²è¡ŒåŸ·è¡Œ
  - çµæœæ­£ç¢ºè¿”å›

#### API-GAP-006-UT: ä¸¦è¡ŒåŸ·è¡Œ Phase 2 æ¸¬è©¦
- **åç¨±**: Phase 2 Index è¨ˆç®—å’Œ Gap å‰ç½®æº–å‚™ä¸¦è¡Œ
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ Index è¨ˆç®—èˆ‡ Gap context æº–å‚™ä¸¦è¡ŒåŸ·è¡Œ
- **æ¸¬è©¦å…§å®¹**: æ¸¬è©¦ Index è¨ˆç®—å’Œ Gap Analysis å‰ç½®æº–å‚™çš„ä¸¦è¡Œè™•ç†
- **åˆ¤æ–·æ¨™æº–**: 
  - å…©å€‹ä»»å‹™ä¸¦è¡ŒåŸ·è¡Œ
  - æ­£ç¢ºå‚³éä¾è³´æ•¸æ“š
  - ç„¡ç«¶çˆ­æ¢ä»¶

#### API-GAP-007-UT: ä¸¦è¡ŒåŸ·è¡Œ Phase 3 æ¸¬è©¦
- **åç¨±**: Phase 3 Gap Analysis ä½¿ç”¨ Index çµæœ
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ Gap Analysis æ­£ç¢ºæ¥æ”¶å’Œä½¿ç”¨ Index çµæœ
- **æ¸¬è©¦å…§å®¹**: æ¸¬è©¦ Gap Analysis æ¥æ”¶ Index çµæœä¸¦æ­£ç¢ºè™•ç†
- **åˆ¤æ–·æ¨™æº–**: 
  - æ­£ç¢ºæ¥æ”¶ matched_keywords
  - æ­£ç¢ºæ¥æ”¶ missing_keywords
  - Gap Analysis çµæœåŒ…å«é—œéµå­—è³‡è¨Š

#### API-GAP-008-UT: AdaptiveRetryStrategy åˆå§‹åŒ–æ¸¬è©¦
- **åç¨±**: è‡ªé©æ‡‰é‡è©¦ç­–ç•¥é…ç½®é©—è­‰
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ä¸åŒéŒ¯èª¤é¡å‹çš„é‡è©¦é…ç½®æ­£ç¢º
- **æ¸¬è©¦å…§å®¹**: æ¸¬è©¦å„ç¨®éŒ¯èª¤é¡å‹çš„é‡è©¦ç­–ç•¥é…ç½®
- **æ¸¬è©¦æ–¹æ³•**:
  1. åˆå§‹åŒ– AdaptiveRetryStrategy
  2. æª¢æŸ¥å„éŒ¯èª¤é¡å‹çš„é…ç½®å€¼
  3. é©—è­‰ç­–ç•¥ç‰©ä»¶æ­£ç¢ºå‰µå»º
- **åˆ¤æ–·æ¨™æº–**: 
  - empty_fields: æœ€å¤š 2 æ¬¡é‡è©¦ï¼Œç·šæ€§é€€é¿ï¼Œ1 ç§’å»¶é²
  - timeout: æœ€å¤š 1 æ¬¡é‡è©¦ï¼ŒæŒ‡æ•¸é€€é¿ï¼Œ0.5 ç§’åŸºç¤å»¶é²
  - rate_limit: æœ€å¤š 3 æ¬¡é‡è©¦ï¼ŒæŒ‡æ•¸é€€é¿ï¼Œ5 ç§’åŸºç¤å»¶é²ï¼Œæœ€å¤§ 20 ç§’
  - validation: ä¸é‡è©¦ï¼ˆ0 æ¬¡ï¼‰
  - general: æœ€å¤š 2 æ¬¡é‡è©¦ï¼Œç·šæ€§é€€é¿ï¼Œ1 ç§’å»¶é²

#### API-GAP-009-UT: ç©ºæ¬„ä½éŒ¯èª¤é‡è©¦æ¸¬è©¦ [å·²åˆä½µè‡³ERROR_HANDLER]
- **ç‹€æ…‹**: âš ï¸ **å·²ç§»é™¤** - åˆä½µè‡³ ERR-019-UT (é€šç”¨é‡è©¦æ©Ÿåˆ¶éŒ¯èª¤åˆ†é¡)
- **åç¨±**: empty_fields éŒ¯èª¤é¡å‹é‡è©¦è¡Œç‚º
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ Gap Analysis å›æ‡‰ä¸­ç©ºæ¬„ä½éŒ¯èª¤çš„é‡è©¦è¡Œç‚º
- **æ¸¬è©¦å…§å®¹**: æ¨¡æ“¬ Gap Analysis å›æ‡‰ä¸­ CoreStrengthsã€KeyGaps ç­‰å¿…è¦æ¬„ä½ç‚ºç©ºçš„æƒ…æ³ï¼Œé©—è­‰é‡è©¦é‚è¼¯
- **æ¸¬è©¦æ–¹æ³•**:
  1. æ¨¡æ“¬ Gap Analysis æœå‹™è¿”å›ç©ºæ¬„ä½éŸ¿æ‡‰
  2. è§¸ç™¼ "Empty fields detected" éŒ¯èª¤
  3. é©—è­‰é‡è©¦é…ç½®å’Œè¡Œç‚º
- **åˆ¤æ–·æ¨™æº–**: 
  - æœ€å¤šé‡è©¦ 2 æ¬¡
  - ä½¿ç”¨ç·šæ€§é€€é¿ç­–ç•¥ (0.1ç§’åŸºç¤å»¶é²)
  - é‡è©¦æˆåŠŸå¾Œè¿”å›æ­£ç¢ºçµæœ

#### API-GAP-010-UT: è¶…æ™‚éŒ¯èª¤é‡è©¦æ¸¬è©¦ [å·²åˆä½µè‡³ERROR_HANDLER]
- **ç‹€æ…‹**: âš ï¸ **å·²ç§»é™¤** - åˆä½µè‡³ ERR-017-UT (é€šç”¨å¤–éƒ¨æœå‹™éŒ¯èª¤åˆ†é¡)
- **åç¨±**: timeout éŒ¯èª¤é¡å‹é‡è©¦è¡Œç‚º
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰è¶…æ™‚éŒ¯èª¤ä½¿ç”¨æŒ‡æ•¸é€€é¿ï¼ŒåŸºç¤å»¶é² 0.5 ç§’
- **æ¸¬è©¦å…§å®¹**: æ¨¡æ“¬è¶…æ™‚éŒ¯èª¤ï¼Œé©—è­‰é‡è©¦ç­–ç•¥
- **åˆ¤æ–·æ¨™æº–**: 
  - æœ€å¤šé‡è©¦ 1 æ¬¡
  - ä½¿ç”¨æŒ‡æ•¸é€€é¿ç­–ç•¥
  - åŸºç¤å»¶é² 0.5 ç§’

#### API-GAP-011-UT: é€Ÿç‡é™åˆ¶éŒ¯èª¤é‡è©¦æ¸¬è©¦ [å·²åˆä½µè‡³ERROR_HANDLER]
- **ç‹€æ…‹**: âš ï¸ **å·²ç§»é™¤** - åˆä½µè‡³ ERR-017-UT (é€šç”¨å¤–éƒ¨æœå‹™éŒ¯èª¤åˆ†é¡)
- **åç¨±**: rate_limit éŒ¯èª¤é¡å‹é‡è©¦è¡Œç‚º
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰é€Ÿç‡é™åˆ¶éŒ¯èª¤ä½¿ç”¨æŒ‡æ•¸é€€é¿ï¼ŒåŸºç¤å»¶é² 5 ç§’
- **æ¸¬è©¦å…§å®¹**: æ¨¡æ“¬é€Ÿç‡é™åˆ¶éŒ¯èª¤ï¼Œé©—è­‰é‡è©¦è¡Œç‚º
- **åˆ¤æ–·æ¨™æº–**: 
  - æœ€å¤šé‡è©¦ 3 æ¬¡
  - ä½¿ç”¨æŒ‡æ•¸é€€é¿ç­–ç•¥
  - åŸºç¤å»¶é² 5 ç§’ï¼Œæœ€å¤§ 20 ç§’

#### API-GAP-012-UT: Gap Analysis å¤±æ•—è™•ç†æ¸¬è©¦
- **åç¨±**: Gap Analysis å¤±æ•—æ™‚æ•´å€‹ API å¤±æ•—
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ Gap Analysis å¤±æ•—æ™‚æ•´å€‹ API æ‡‰è©²å¤±æ•—ï¼Œè€Œä¸æ˜¯è¿”å›éƒ¨åˆ†çµæœ
- **æ¸¬è©¦å…§å®¹**: æ¨¡æ“¬ Gap Analysis æœå‹™å¤±æ•—ï¼Œé©—è­‰ API æ­£ç¢ºæ‹‹å‡ºéŒ¯èª¤
- **è¨­è¨ˆç†ç”±**: æ ¹æ“šç”¢å“éœ€æ±‚ï¼ŒGap Analysis æ˜¯æ ¸å¿ƒåŠŸèƒ½ï¼Œå¤±æ•—æ™‚æ‡‰è©²è®“æ•´å€‹ API å¤±æ•—ï¼Œç¢ºä¿ç”¨æˆ¶å¾—åˆ°å®Œæ•´ä¸”æœ‰æ„ç¾©çš„çµæœ
- **åˆ¤æ–·æ¨™æº–**: 
  - Gap Analysis å¤±æ•—æ™‚æ‹‹å‡ºç›¸æ‡‰éŒ¯èª¤
  - ä¸è¿”å›éƒ¨åˆ†çµæœ (disable partial results)
  - **éŒ¯èª¤è¦æ ¼æ˜ç¢ºå®šç¾©**ï¼š
    - HTTP ç‹€æ…‹ç¢¼ï¼š502 (Bad Gateway - å¤–éƒ¨æœå‹™éŒ¯èª¤)
    - Error Codeï¼š"EXTERNAL_SERVICE_ERROR" 
    - Error Messageï¼š"Gap Analysis service is temporarily unavailable"
    - **èˆ‡ API-GAP-013-UT å·®ç•°**ï¼š
      - API-GAP-012-UTï¼šåªæœ‰ Gap Analysis å¤±æ•— â†’ 502 éŒ¯èª¤
      - API-GAP-013-UTï¼šIndex + Gap éƒ½å¤±æ•— â†’ BaseExceptionGroup + 500 éŒ¯èª¤

#### API-GAP-013-UT: å®Œå…¨å¤±æ•—è™•ç†æ¸¬è©¦
- **åç¨±**: Index å’Œ Gap éƒ½å¤±æ•—çš„è™•ç†
- **å„ªå…ˆç´š**: P1
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰å…©å€‹æœå‹™éƒ½å¤±æ•—æ™‚æ­£ç¢ºæ‹‹å‡ºéŒ¯èª¤
- **æ¸¬è©¦å…§å®¹**: æ¨¡æ“¬ Index å’Œ Gap Analysis éƒ½å¤±æ•—
- **åˆ¤æ–·æ¨™æº–**: 
  - æ‹‹å‡º BaseExceptionGroup é¡å‹éŒ¯èª¤ (Python 3.11+ çš„ç•°å¸¸çµ„)
  - éŒ¯èª¤çµ„åŒ…å«å…©å€‹å­éŒ¯èª¤ï¼šIndex è¨ˆç®—éŒ¯èª¤å’Œ Gap Analysis éŒ¯èª¤
  - éŒ¯èª¤è¨Šæ¯æ˜ç¢ºæ¨™ç¤ºå…©å€‹æœå‹™çš„å¤±æ•—åŸå› 
  - HTTP ç‹€æ…‹ç¢¼ç‚º 500 (å…§éƒ¨ä¼ºæœå™¨éŒ¯èª¤)
  - ç„¡éƒ¨åˆ†çµæœè¿”å›

#### API-GAP-014-UT: æœå‹™ä¾è³´é©—è­‰æ¸¬è©¦
- **åç¨±**: Gap Analysis æ¥æ”¶ Index çµæœä¾è³´
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ matched_keywords å’Œ missing_keywords æ­£ç¢ºå‚³é
- **æ¸¬è©¦å…§å®¹**: é©—è­‰ Index çµæœæ­£ç¢ºå‚³éçµ¦ Gap Analysis
- **åˆ¤æ–·æ¨™æº–**: 
  - matched_keywords æ­£ç¢ºå‚³é
  - missing_keywords æ­£ç¢ºå‚³é
  - Gap Analysis ä½¿ç”¨é€™äº›è³‡è¨Š

#### API-GAP-015-UT: é—œéµå­—è¦†è“‹è¨ˆç®—æ¸¬è©¦
- **åç¨±**: é—œéµå­—åŒ¹é…çµæœå‚³éçµ¦ Gap Analysis
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ covered_keywords å’Œ missed_keywords æ­£ç¢ºè¨ˆç®—å’Œå‚³é
- **æ¸¬è©¦å…§å®¹**: æ¸¬è©¦é—œéµå­—è¦†è“‹ç‡è¨ˆç®—é‚è¼¯
- **åˆ¤æ–·æ¨™æº–**: 
  - è¦†è“‹ç‡è¨ˆç®—æº–ç¢º
  - é—œéµå­—åˆ†é¡æ­£ç¢º
  - å¤§å°å¯«ä¸æ•æ„ŸåŒ¹é…

#### API-GAP-016-UT: éŒ¯èª¤åˆ†é¡å™¨æ¸¬è©¦
- **åç¨±**: éŒ¯èª¤é¡å‹åˆ†é¡é‚è¼¯é©—è­‰
- **å„ªå…ˆç´š**: P1
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ _classify_gap_error æ­£ç¢ºè­˜åˆ¥éŒ¯èª¤é¡å‹
- **æ¸¬è©¦å…§å®¹**: æ¸¬è©¦å„ç¨®éŒ¯èª¤é¡å‹çš„åˆ†é¡é‚è¼¯
- **åˆ¤æ–·æ¨™æº–**: 
  - æ­£ç¢ºè­˜åˆ¥å„ç¨®éŒ¯èª¤é¡å‹
  - è¿”å›å°æ‡‰çš„éŒ¯èª¤åˆ†é¡
  - æœªçŸ¥éŒ¯èª¤æ­¸é¡ç‚º general

#### API-GAP-017-UT: çµ±è¨ˆè¿½è¹¤æ¸¬è©¦
- **åç¨±**: æœå‹™çµ±è¨ˆè³‡è¨Šè¿½è¹¤
- **å„ªå…ˆç´š**: P2
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ total_requestsã€partial_successes ç­‰çµ±è¨ˆæ­£ç¢ºæ›´æ–°
- **æ¸¬è©¦å…§å®¹**: æ¸¬è©¦æœå‹™çµ±è¨ˆè³‡è¨Šçš„æ”¶é›†å’Œæ›´æ–°
- **åˆ¤æ–·æ¨™æº–**: 
  - è«‹æ±‚è¨ˆæ•¸æ­£ç¢ºå¢åŠ 
  - æˆåŠŸ/å¤±æ•—çµ±è¨ˆæº–ç¢º
  - è™•ç†æ™‚é–“è¨˜éŒ„æ­£ç¢º

#### API-GAP-018-UT: HTML æ–‡æœ¬è™•ç†å·®ç•°æ¸¬è©¦
- **åç¨±**: Embedding å’Œ LLM çš„å·®ç•°åŒ–æ–‡æœ¬è™•ç†
- **å„ªå…ˆç´š**: P1
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ Embedding ä½¿ç”¨æ¸…ç†æ–‡æœ¬ï¼ŒLLM ä¿ç•™ HTML çµæ§‹
- **æ¸¬è©¦å…§å®¹**: æ¸¬è©¦ HTML å…§å®¹çš„å·®ç•°åŒ–è™•ç†
- **åˆ¤æ–·æ¨™æº–**: 
  - Embedding æ¥æ”¶ç´”æ–‡å­—
  - LLM æ¥æ”¶å®Œæ•´ HTML
  - è™•ç†çµæœç¬¦åˆé æœŸ

#### API-GAP-019-UT: TaskGroup ç•°å¸¸è™•ç†æ¸¬è©¦
- **åç¨±**: Python 3.11 TaskGroup ExceptionGroup è™•ç†
- **å„ªå…ˆç´š**: P1
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ä¸¦è¡Œä»»å‹™å¤±æ•—æ™‚çš„ç•°å¸¸èšåˆè™•ç†
- **æ¸¬è©¦å…§å®¹**: æ¸¬è©¦ TaskGroup ä¸­å¤šå€‹ä»»å‹™å¤±æ•—çš„è™•ç†
- **åˆ¤æ–·æ¨™æº–**: 
  - ExceptionGroup æ­£ç¢ºèšåˆéŒ¯èª¤
  - å¯å­˜å–æ‰€æœ‰å­ç•°å¸¸
  - éŒ¯èª¤è¨Šæ¯æ¸…æ™°

#### API-GAP-020-UT: æœå‹™æ¸…ç†æ¸¬è©¦
- **åç¨±**: ç•°å¸¸æ™‚çš„è³‡æºæ¸…ç†é©—è­‰
- **å„ªå…ˆç´š**: P1
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰éŒ¯èª¤ç™¼ç”Ÿæ™‚è³‡æºæ± å®¢æˆ¶ç«¯æ­£ç¢ºæ­¸é‚„
- **æ¸¬è©¦å…§å®¹**: æ¸¬è©¦ç•°å¸¸æƒ…æ³ä¸‹çš„è³‡æºæ¸…ç†
- **åˆ¤æ–·æ¨™æº–**: 
  - å®¢æˆ¶ç«¯æ­£ç¢ºæ­¸é‚„è³‡æºæ± 
  - ç„¡è³‡æºæ´©æ¼
  - è³‡æºæ± ç‹€æ…‹æ­£å¸¸

### 2.2 æ•´åˆæ¸¬è©¦ (31å€‹)

#### API-GAP-001-IT: API ç«¯é»åŸºæœ¬åŠŸèƒ½æ¸¬è©¦
- **åç¨±**: POST /api/v1/index-cal-and-gap-analysis æ­£å¸¸æµç¨‹
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ API ç«¯é»æ­£å¸¸é‹ä½œï¼Œå›æ‡‰æ ¼å¼æ­£ç¢º
- **æ¸¬è©¦å…§å®¹**: ä½¿ç”¨æœ‰æ•ˆè¼¸å…¥æ¸¬è©¦å®Œæ•´çš„ API æµç¨‹
- **æ¸¬è©¦è³‡æ–™**:
  ```yaml
  request:
    resume: "<div><h2>Full Stack Developer</h2><p><strong>8+ years</strong> in software development</p><h3>Expertise</h3><ul><li>Python, FastAPI, Django</li><li>React, JavaScript</li><li>Microservices architecture</li><li>RESTful APIs</li></ul><h3>Cloud & DevOps</h3><ul><li>AWS, Azure</li><li>Docker, Kubernetes</li><li>CI/CD pipelines</li></ul><p>Led development teams and delivered enterprise-scale applications.</p></div>" # 380+ chars HTML
    job_description: "Looking for a Senior Full Stack Developer to join our innovative team. Must have 5+ years of experience with Python, FastAPI, and modern JavaScript frameworks. Required skills include Docker, Kubernetes, AWS, microservices, and database design. Experience with machine learning and data engineering is highly valued." # 320+ chars
    keywords: ["Python", "FastAPI", "React", "Docker", "Kubernetes", "AWS", "Microservices"]
    language: "en"
  expected:
    status: 200
    success: true
  ```
- **åˆ¤æ–·æ¨™æº–**: 
  - è¿”å› 200 ç‹€æ…‹ç¢¼
  - **å¿…è¦æ¬„ä½**å®Œæ•´åŒ…å«ï¼š
    - `success`: boolean (true)
    - `data.index_calculation`: object (åŒ¹é…æŒ‡æ•¸çµæœ)
    - `data.gap_analysis`: object (å·®è·åˆ†æçµæœ)
    - `data.processing_time_ms`: number (è™•ç†æ™‚é–“)
    - `timestamp`: string (ISOæ ¼å¼æ™‚é–“æˆ³)
  - è¨ˆç®—çµæœåˆç† (åŒ¹é…æŒ‡æ•¸ 0-100ï¼Œå·®è·åˆ†æåŒ…å« CoreStrengths å’Œ KeyGaps)

#### API-GAP-002-IT: JD é•·åº¦é©—è­‰æ¸¬è©¦
- **åç¨±**: Job Description < 200 å­—å…ƒéŒ¯èª¤è™•ç†
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ JD å°‘æ–¼ 200 å­—å…ƒæ™‚è¿”å› 422 éŒ¯èª¤ (Pydantic é©—è­‰éŒ¯èª¤)
- **æ¸¬è©¦å…§å®¹**: æ¸¬è©¦çŸ­ Job Description çš„éŒ¯èª¤è™•ç†
- **éŒ¯èª¤ä»£ç¢¼èªªæ˜**: ä½¿ç”¨ 422 å› ç‚ºé€™æ˜¯ Pydantic æ¨¡å‹é©—è­‰å¤±æ•—ï¼Œè«‹æ±‚æ ¼å¼æ­£ç¢ºä½†å…§å®¹ä¸ç¬¦åˆé©—è­‰è¦å‰‡
- **åˆ¤æ–·æ¨™æº–**: 
  - è¿”å› 422 éŒ¯èª¤ç¢¼ (Unprocessable Entity)
  - éŒ¯èª¤è¨Šæ¯æ˜ç¢ºæŒ‡å‡º "Job description must be at least 200 characters"
  - éŒ¯èª¤ä»£ç¢¼ç‚º VALIDATION_ERROR (çµ±ä¸€é©—è­‰éŒ¯èª¤ç¢¼)

#### API-GAP-003-IT: Resume é•·åº¦é©—è­‰æ¸¬è©¦
- **åç¨±**: Resume < 200 å­—å…ƒéŒ¯èª¤è™•ç†
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ Resume å°‘æ–¼ 200 å­—å…ƒæ™‚è¿”å› 422 éŒ¯èª¤ (Pydantic é©—è­‰éŒ¯èª¤)
- **æ¸¬è©¦å…§å®¹**: æ¸¬è©¦çŸ­ Resume çš„éŒ¯èª¤è™•ç†
- **æ¸¬è©¦è³‡æ–™**:
  ```yaml
  request:
    resume: "Software developer" # åªæœ‰ 18 å­—å…ƒ
    job_description: "We are seeking an experienced Senior Software Engineer to join our dynamic team. The ideal candidate will have 5+ years of experience in software development, strong programming skills in Python and JavaScript, and expertise in cloud technologies. Must be proficient in modern development practices." # 300+ chars
    keywords: ["Python", "JavaScript"]
  expected:
    status: 422
    error:
      code: "VALIDATION_ERROR"
      message: "Resume must be at least 200 characters"
  ```
- **éŒ¯èª¤ä»£ç¢¼èªªæ˜**: ä½¿ç”¨ 422 å› ç‚ºé€™æ˜¯ Pydantic æ¨¡å‹é©—è­‰å¤±æ•—ï¼Œæ˜ç¢ºæ¨™ç¤ºç‚º Resume é•·åº¦ä¸è¶³
- **åˆ¤æ–·æ¨™æº–**: 
  - è¿”å› 422 éŒ¯èª¤ç¢¼ (Unprocessable Entity)
  - éŒ¯èª¤è¨Šæ¯æ˜ç¢ºæŒ‡å‡º "Resume must be at least 200 characters"
  - éŒ¯èª¤ä»£ç¢¼ç‚º VALIDATION_ERRORï¼Œè©³ç´°èªªæ˜ç‚º Resume é•·åº¦ä¸è¶³

#### API-GAP-004-IT: é‚Šç•Œé•·åº¦æ¸¬è©¦
- **åç¨±**: JD å’Œ Resume æ­£å¥½ 200 å­—å…ƒæ¸¬è©¦
- **å„ªå…ˆç´š**: P1
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰æ­£å¥½ 200 å­—å…ƒæ™‚æ­£å¸¸è™•ç†
- **æ¸¬è©¦å…§å®¹**: æ¸¬è©¦é‚Šç•Œé•·åº¦çš„è™•ç†
- **æ¸¬è©¦è³‡æ–™**:
  ```yaml
  request:
    resume: "Senior Software Engineer with 10 years of experience in full-stack development. Expert in Python, JavaScript, and cloud technologies. Strong leadership and communication skills. Proven track record.." # æ­£å¥½ 200 å­—å…ƒ
    job_description: "Looking for Senior Developer with Python and JavaScript expertise. Must have experience with cloud platforms, databases, and modern frameworks. Team collaboration and problem solving skills required." # æ­£å¥½ 200 å­—å…ƒ
    keywords: ["Python", "JavaScript", "Cloud"]
  expected:
    status: 200
    success: true
  ```
- **åˆ¤æ–·æ¨™æº–**: 
  - è¿”å› 200 ç‹€æ…‹ç¢¼
  - æˆåŠŸè™•ç†è«‹æ±‚
  - è¿”å›å®Œæ•´çµæœ

#### API-GAP-005-IT: é—œéµå­—åƒæ•¸é©—è­‰æ¸¬è©¦
- **åç¨±**: keywords åƒæ•¸æ ¼å¼é©—è­‰
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ keywords æ”¯æ´é™£åˆ—å’Œé€—è™Ÿåˆ†éš”å­—ä¸²
- **æ¸¬è©¦å…§å®¹**: æ¸¬è©¦ä¸åŒé—œéµå­—æ ¼å¼çš„è™•ç†
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. æ¸¬è©¦é™£åˆ—æ ¼å¼ï¼š["Python", "Docker", "AWS"]
  2. æ¸¬è©¦é€—è™Ÿåˆ†éš”ï¼š"Python,Docker,AWS"
  3. é©—è­‰å…©ç¨®æ ¼å¼ç”¢ç”Ÿç›¸åŒçµæœ
- **åˆ¤æ–·æ¨™æº–**: 
  - é™£åˆ—æ ¼å¼æ­£å¸¸è™•ç†
  - å­—ä¸²æ ¼å¼æ­£å¸¸è™•ç†
  - å…©ç¨®æ ¼å¼çµæœä¸€è‡´

#### API-GAP-006-IT: èªè¨€åƒæ•¸é©—è­‰æ¸¬è©¦
- **åç¨±**: language åƒæ•¸é©—è­‰ï¼ˆåªæ¸¬è©¦åƒæ•¸å‚³éï¼‰
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰åªæ¥å— "en" å’Œ "zh-TW"ï¼Œå…¶ä»–å€¼è¿”å›éŒ¯èª¤
- **æ¸¬è©¦å…§å®¹**: æ¸¬è©¦ç„¡æ•ˆèªè¨€åƒæ•¸çš„è™•ç†
- **æ¸¬è©¦è³‡æ–™**:
  ```yaml
  invalid_languages: ["fr", "ja", "ko", "es", "de"]
  expected:
    status: 422
    error:
      code: "VALIDATION_ERROR"
      message: "Unsupported language: {language}. Supported: en, zh-TW"
  ```
- **åˆ¤æ–·æ¨™æº–**: 
  - ç„¡æ•ˆèªè¨€è¿”å› 422 (Pydantic æ¨¡å‹é©—è­‰ä½¿ç”¨ 422 ç‹€æ…‹ç¢¼) 
  - éŒ¯èª¤ä»£ç¢¼ç‚º INVALID_LANGUAGE 
  - éŒ¯èª¤è¨Šæ¯æ¸…æ™°

#### API-GAP-007-IT: Bubble.io å›æ‡‰æ ¼å¼é©—è­‰
- **åç¨±**: å›æ‡‰æ ¼å¼ç¬¦åˆ Bubble.io å›ºå®š schema
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰å›æ‡‰åŒ…å«æ‰€æœ‰å¿…è¦æ¬„ä½ä¸”æ ¼å¼æ­£ç¢º
- **æ¸¬è©¦å…§å®¹**: é©—è­‰ API å›æ‡‰ç¬¦åˆå›ºå®š schema
- **åˆ¤æ–·æ¨™æº–**: 
  - success æ¬„ä½å­˜åœ¨ä¸”ç‚º boolean
  - data æ¬„ä½åŒ…å«æ‰€æœ‰å¿…è¦å­æ¬„ä½
  - timestamp ç‚º ISO 8601 æ ¼å¼

#### API-GAP-008-IT: Feature Flag æ¸¬è©¦
- **åç¨±**: USE_V2_IMPLEMENTATION Feature Flag é©—è­‰
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ Feature Flag æ§åˆ¶ V2 å¯¦ä½œå•Ÿç”¨
- **æ¸¬è©¦å…§å®¹**: æ¸¬è©¦ Feature Flag å°æœå‹™è¡Œç‚ºçš„å½±éŸ¿
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. è¨­å®š USE_V2_IMPLEMENTATION=true
  2. ç™¼é€è«‹æ±‚
  3. é©—è­‰ä½¿ç”¨ V2 æœå‹™ï¼ˆé€éå›æ‡‰æ™‚é–“æˆ–ç›£æ§äº‹ä»¶ï¼‰
- **åˆ¤æ–·æ¨™æº–**: 
  - V2 æœå‹™æ­£ç¢ºå•Ÿç”¨
  - å›æ‡‰åŒ…å« V2 ç‰¹å®šæ¬„ä½
  - ç›£æ§äº‹ä»¶è¨˜éŒ„ V2 ä½¿ç”¨

#### API-GAP-009-IT: å®Œæ•´å¤±æ•—è™•ç†æ¸¬è©¦ 
- **åç¨±**: Gap Analysis å¤±æ•—æ™‚çš„å®Œæ•´å¤±æ•—ç­–ç•¥
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ä»»ä¸€æœå‹™å¤±æ•—æ™‚ï¼Œæ•´å€‹ API è«‹æ±‚å¤±æ•—
- **æ¸¬è©¦å…§å®¹**: Mock Gap Analysis å¤±æ•—ï¼Œé©—è­‰å®Œæ•´å¤±æ•—è™•ç†
- **åˆ¤æ–·æ¨™æº–**: 
  - API å›æ‡‰ç‹€æ…‹ç¢¼ 502 (External Service Error)
  - ä¸è¿”å›éƒ¨åˆ†çµæœ 
  - éŒ¯èª¤è¨Šæ¯æ˜ç¢ºæŒ‡å‡ºå¤±æ•—åŸå› 

#### API-GAP-010-IT: æœå‹™è¶…æ™‚è™•ç†æ¸¬è©¦
- **åç¨±**: å¤–éƒ¨æœå‹™è¶…æ™‚çš„éŒ¯èª¤è™•ç†
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ Azure OpenAI è¶…æ™‚æ™‚çš„é‡è©¦å’ŒéŒ¯èª¤è™•ç†
- **æ¸¬è©¦å…§å®¹**: Mock æœå‹™è¶…æ™‚ï¼Œé©—è­‰é‡è©¦æ©Ÿåˆ¶
- **åˆ¤æ–·æ¨™æº–**: 
  - é‡è©¦ 1 æ¬¡å¾ŒæˆåŠŸæˆ–å¤±æ•—
  - è¶…æ™‚éŒ¯èª¤è¿”å› 504
  - éŒ¯èª¤è¨Šæ¯æ¸…æ™°

#### API-GAP-011-IT: é€Ÿç‡é™åˆ¶éŒ¯èª¤è™•ç†æ¸¬è©¦
- **åç¨±**: Azure OpenAI é€Ÿç‡é™åˆ¶è™•ç†
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰é‡åˆ°é€Ÿç‡é™åˆ¶æ™‚çš„é‡è©¦ç­–ç•¥
- **æ¸¬è©¦å…§å®¹**: Mock é€Ÿç‡é™åˆ¶éŒ¯èª¤ï¼Œé©—è­‰é‡è©¦è¡Œç‚º
- **åˆ¤æ–·æ¨™æº–**: 
  - è¿”å› 429 éŒ¯èª¤ç¢¼
  - é‡è©¦ä½¿ç”¨æŒ‡æ•¸é€€é¿
  - åŒ…å« Retry-After è³‡è¨Š

#### API-GAP-012-IT: è™•ç†æ™‚é–“å…ƒæ•¸æ“šæ¸¬è©¦
- **åç¨±**: å›æ‡‰åŒ…å«è™•ç†æ™‚é–“åˆ†è§£
- **å„ªå…ˆç´š**: P1
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ V2 å›æ‡‰åŒ…å« processing_time_ms å’Œ service_timings
- **æ¸¬è©¦å…§å®¹**: é©—è­‰å›æ‡‰åŒ…å«è©³ç´°çš„æ™‚é–“åˆ†æ
- **åˆ¤æ–·æ¨™æº–**: 
  - processing_time_ms å­˜åœ¨ä¸”åˆç†
  - service_timings åŒ…å«å„éšæ®µæ™‚é–“
  - æ™‚é–“åŠ ç¸½æ­£ç¢º

#### API-GAP-013-IT: å¤§æ–‡æª”è™•ç†æ¸¬è©¦
- **åç¨±**: è™•ç†å¤§å‹ JD å’Œ Resume
- **å„ªå…ˆç´š**: P1
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰è™•ç† 10KBã€20KBã€30KB æ–‡æª”çš„èƒ½åŠ›
- **æ¸¬è©¦å…§å®¹**: ä½¿ç”¨ä¸åŒå¤§å°çš„æ–‡æª”æ¸¬è©¦è™•ç†èƒ½åŠ›
- **åˆ¤æ–·æ¨™æº–**: 
  - æˆåŠŸè™•ç†ä¸è¶…æ™‚
  - è¨˜æ†¶é«”ä½¿ç”¨åˆç†
  - è™•ç†æ™‚é–“ç¬¦åˆé æœŸ

#### API-GAP-014-IT: èªè­‰æ©Ÿåˆ¶æ¸¬è©¦
- **åç©¨**: API Key èªè­‰é©—è­‰
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰æ”¯æ´ Header (X-API-Key) å’Œ Query (?code=) èªè­‰
- **æ¸¬è©¦å…§å®¹**: æ¸¬è©¦ä¸åŒèªè­‰æ–¹å¼
- **åˆ¤æ–·æ¨™æº–**: 
  - Header èªè­‰æˆåŠŸ
  - Query åƒæ•¸èªè­‰æˆåŠŸ
  - ç„¡æ•ˆ key è¿”å› 401

#### API-GAP-015-IT: è³‡æºæ± é‡ç”¨ç‡æ¸¬è©¦
- **åç¨±**: è³‡æºæ± å®¢æˆ¶ç«¯é‡ç”¨ç‡ > 80%
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **éœ€æ±‚ç·¨è™Ÿ**: REQ-004
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰è³‡æºæ± æœ‰æ•ˆæ¸›å°‘åˆå§‹åŒ–é–‹éŠ·
- **æ¸¬è©¦æ–¹æ³•**:
  1. Mock LLM å’Œ Embedding æœå‹™
  2. ç™¼é€ 100 å€‹è«‹æ±‚
  3. æª¢æŸ¥è³‡æºæ± çµ±è¨ˆ
  4. é©—è­‰ reuse_rate > 80%
- **æ³¨æ„äº‹é …**:
  - æ­¤æ¸¬è©¦éœ€è¦é–‹å•Ÿè³‡æºæ± åŠŸèƒ½
  - ä½¿ç”¨é‡è¤‡çš„æ¸¬è©¦è³‡æ–™ä¾†æ¸¬è©¦é‡ç”¨æ•ˆæœ
  - Mock æœå‹™é¿å…çœŸå¯¦ API èª¿ç”¨å»¶é²
- **åŸå§‹ç·¨è™Ÿ**: åŸç‚º API-GAP-003-PT

#### API-GAP-016-IT: è³‡æºæ± æ“´å±•æ¸¬è©¦
- **åç¨±**: è³‡æºæ± å‹•æ…‹æ“´å±•åŠŸèƒ½
- **å„ªå…ˆç´š**: P2
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **éœ€æ±‚ç·¨è™Ÿ**: REQ-004
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰è³‡æºæ± å¾ min_size æ“´å±•åˆ° max_size çš„åŠŸèƒ½
- **æ¸¬è©¦æ–¹æ³•**:
  1. Mock LLM å’Œ Embedding æœå‹™
  2. åˆå§‹åŒ–è³‡æºæ±  (min_size=2, max_size=10)
  3. ä¸¦ç™¼ç™¼é€ 10 å€‹è«‹æ±‚
  4. é©—è­‰è³‡æºæ± å‹•æ…‹æ“´å±•åˆ°æ‰€éœ€å¤§å°
  5. é©—è­‰æ‰€æœ‰è«‹æ±‚éƒ½æˆåŠŸè™•ç†
- **æ³¨æ„äº‹é …**:
  - ä½¿ç”¨ä¸åŒçš„æ¸¬è©¦è³‡æ–™è§¸ç™¼è³‡æºæ± æ“´å±•
  - æ¯å€‹è«‹æ±‚ä½¿ç”¨ä¸åŒ ID ç¢ºä¿ä¸æœƒè¢«è³‡æºæ± é‡ç”¨
  - Mock æœå‹™é¿å…çœŸå¯¦ API èª¿ç”¨å»¶é²
- **åŸå§‹ç·¨è™Ÿ**: åŸç‚º API-GAP-005-PT

#### API-GAP-017-IT: API å‘¼å«æ¸›å°‘é©—è­‰
- **åç¨±**: å…±äº« Embedding æ¸›å°‘ API å‘¼å« 40-50%
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **éœ€æ±‚ç·¨è™Ÿ**: REQ-004
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ç›¸åŒè¼¸å…¥çš„é‡è¤‡è«‹æ±‚æ¸›å°‘ API å‘¼å«
- **æ¸¬è©¦æ–¹æ³•**:
  1. Mock LLM å’Œ Embedding æœå‹™ï¼Œè¿½è¹¤èª¿ç”¨æ¬¡æ•¸
  2. ç™¼é€ç›¸åŒè«‹æ±‚ 10 æ¬¡
  3. é©—è­‰ Embedding API åªè¢«èª¿ç”¨ 1 æ¬¡ï¼ˆæˆ–æ¥µå°‘æ¬¡æ•¸ï¼‰
  4. é©—è­‰å¿«å–å‘½ä¸­ç‡ > 80%
  5. ç¢ºèª API å‘¼å«æ¸›å°‘ 40% ä»¥ä¸Š
- **æ³¨æ„äº‹é …**:
  - æ­¤æ¸¬è©¦å°ˆé–€é©—è­‰è³‡æºæ± å¿«å–æ•ˆæœ
  - å¿…é ˆä½¿ç”¨å®Œå…¨ç›¸åŒçš„æ¸¬è©¦è³‡æ–™
  - Mock æœå‹™éœ€è¦æº–ç¢ºè¿½è¹¤èª¿ç”¨è¨ˆæ•¸
- **åŸå§‹ç·¨è™Ÿ**: åŸç‚º API-GAP-004-PT

#### API-GAP-018-IT: Rate Limit é‡è©¦ç­–ç•¥æ¸¬è©¦
- **åç¨±**: Azure OpenAI é™æµéŒ¯èª¤é‡è©¦è¡Œç‚ºé©—è­‰
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰é‡åˆ° 429 éŒ¯èª¤æ™‚ä½¿ç”¨æŒ‡æ•¸é€€é¿ç­–ç•¥
- **æ¸¬è©¦å…§å®¹**: Mock 429 éŒ¯èª¤ï¼Œé©—è­‰é‡è©¦è¡Œç‚ºå’Œå»¶é²æ™‚é–“
- **åˆ¤æ–·æ¨™æº–**: 
  - é‡è©¦ä½¿ç”¨æŒ‡æ•¸é€€é¿ (3s, 6s, 12s)
  - æœ€å¤§å»¶é²ä¸è¶…é 20 ç§’
  - ç¬¬ 4 æ¬¡å¤±æ•—å¾Œæ‹‹å‡ºéŒ¯èª¤

#### API-GAP-019-IT: Retry-After Header è™•ç†æ¸¬è©¦
- **åç¨±**: Azure OpenAI Retry-After æ¨™é ­å„ªå…ˆä½¿ç”¨é©—è­‰
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ç³»çµ±å„ªå…ˆä½¿ç”¨ Retry-After header ä½†é™åˆ¶åœ¨ 20 ç§’å…§
- **æ¸¬è©¦å…§å®¹**: Mock Retry-After headerï¼Œé©—è­‰ä¸Šé™è™•ç†
- **åˆ¤æ–·æ¨™æº–**: 
  - Retry-After > 20s æ™‚ä½¿ç”¨ 20s
  - Retry-After < 20s æ™‚ä½¿ç”¨å¯¦éš›å€¼
  - æ—¥èªŒé¡¯ç¤º "capped at 20s"

#### API-GAP-020-IT: è¶…æ™‚éŒ¯èª¤å¿«é€Ÿé‡è©¦æ¸¬è©¦
- **åç¨±**: è«‹æ±‚è¶…æ™‚éŒ¯èª¤çš„å¿«é€Ÿé‡è©¦è¡Œç‚º
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰è¶…æ™‚éŒ¯èª¤åªé‡è©¦ 1 æ¬¡ï¼Œå»¶é² 0.5 ç§’
- **æ¸¬è©¦å…§å®¹**: Mock TimeoutErrorï¼Œé©—è­‰å¿«é€Ÿé‡è©¦
- **åˆ¤æ–·æ¨™æº–**: 
  - åªé‡è©¦ 1 æ¬¡
  - å»¶é²æ™‚é–“ç´„ 0.5 ç§’
  - ç¬¬äºŒæ¬¡æˆåŠŸå¾Œæ­£å¸¸è¿”å›

#### API-GAP-021-IT: ä¸€èˆ¬éŒ¯èª¤é‡è©¦æ¸¬è©¦
- **åç¨±**: ä¸€èˆ¬æœå‹™éŒ¯èª¤çš„ç·šæ€§é€€é¿é‡è©¦
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ä¸€èˆ¬éŒ¯èª¤é‡è©¦ 2 æ¬¡ï¼Œç·šæ€§é€€é¿ 1 ç§’
- **æ¸¬è©¦å…§å®¹**: Mock ä¸€èˆ¬ Exceptionï¼Œé©—è­‰é‡è©¦è¡Œç‚º
- **åˆ¤æ–·æ¨™æº–**: 
  - é‡è©¦ 2 æ¬¡ï¼ˆåˆå§‹ + 1 æ¬¡é‡è©¦ï¼‰
  - ç·šæ€§é€€é¿ 1 ç§’
  - ç¬¬ 2 æ¬¡å¤±æ•—å¾Œæ‹‹å‡ºéŒ¯èª¤

#### API-GAP-022-IT: é©—è­‰éŒ¯èª¤ç„¡é‡è©¦æ¸¬è©¦
- **åç¨±**: è¼¸å…¥é©—è­‰éŒ¯èª¤ä¸è§¸ç™¼é‡è©¦æ©Ÿåˆ¶
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ ValueErrorï¼ˆ400 éŒ¯èª¤ï¼‰ç«‹å³å¤±æ•—ï¼Œä¸é‡è©¦
- **æ¸¬è©¦å…§å®¹**: Mock ValueErrorï¼Œé©—è­‰ä¸é‡è©¦
- **åˆ¤æ–·æ¨™æº–**: 
  - ä¸é‡è©¦ï¼Œç«‹å³è¿”å›éŒ¯èª¤
  - åªæœ‰ 1 æ¬¡æœå‹™èª¿ç”¨
  - è¿”å› 400 éŒ¯èª¤ç¢¼

#### API-GAP-023-IT: ç„¡éƒ¨åˆ†çµæœæ¸¬è©¦
- **åç¨±**: ä»»ä½•å¤±æ•—éƒ½è¿”å›å®Œå…¨å¤±æ•—ï¼ˆç„¡éƒ¨åˆ†çµæœï¼‰
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ Gap Analysis å¤±æ•—æ™‚ä¸è¿”å› Index çµæœ
- **æ¸¬è©¦å…§å®¹**: Mock Gap Analysis å¤±æ•—ï¼Œé©—è­‰ç„¡éƒ¨åˆ†çµæœ
- **åˆ¤æ–·æ¨™æº–**: 
  - æ•´å€‹è«‹æ±‚å¤±æ•—
  - ç„¡éƒ¨åˆ†è³‡æ–™è¿”å›
  - éŒ¯èª¤è¨Šæ¯å®Œæ•´

#### API-GAP-024-IT: Retry-After ä¸Šé™æ¸¬è©¦
- **åç¨±**: Retry-After å€¼è¶…é 20 ç§’æ™‚çš„è™•ç†
- **å„ªå…ˆç´š**: P1
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ç³»çµ±å°‡éé•·çš„ Retry-After é™åˆ¶åœ¨ 20 ç§’
- **æ¸¬è©¦å…§å®¹**: æ¸¬è©¦ä¸åŒ Retry-After å€¼çš„è™•ç†
- **åˆ¤æ–·æ¨™æº–**: 
  - 60s â†’ ä½¿ç”¨ 20s
  - 15s â†’ ä½¿ç”¨ 15s
  - -1 â†’ ä½¿ç”¨é è¨­ç­–ç•¥

#### API-GAP-025-IT: éŒ¯èª¤åˆ†é¡å™¨æº–ç¢ºæ€§æ¸¬è©¦
- **åç¨±**: éŒ¯èª¤é¡å‹åˆ†é¡é‚è¼¯çš„å®Œæ•´é©—è­‰
- **å„ªå…ˆç´š**: P1
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰å„ç¨®éŒ¯èª¤è¢«æ­£ç¢ºåˆ†é¡
- **æ¸¬è©¦å…§å®¹**: æ¸¬è©¦å„ç¨®éŒ¯èª¤é¡å‹çš„åˆ†é¡
- **åˆ¤æ–·æ¨™æº–**: 
  - TimeoutError â†’ "timeout"
  - ValueError â†’ "validation"
  - "rate limit" â†’ "rate_limit"

#### API-GAP-026-IT: é‡è©¦çµ±è¨ˆè¿½è¹¤æ¸¬è©¦
- **åç¨±**: AdaptiveRetryStrategy çµ±è¨ˆè³‡è¨Šæ­£ç¢ºæ€§
- **å„ªå…ˆç´š**: P2
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰é‡è©¦çµ±è¨ˆæ­£ç¢ºè¨˜éŒ„å’Œè¨ˆç®—
- **æ¸¬è©¦å…§å®¹**: é©—è­‰çµ±è¨ˆè³‡è¨Šçš„æ”¶é›†å’Œè¨ˆç®—
- **åˆ¤æ–·æ¨™æº–**: 
  - retry_stats è¨ˆæ•¸æ­£ç¢º
  - æˆåŠŸç‡è¨ˆç®—æº–ç¢º
  - get_stats() è¿”å›å®Œæ•´

#### API-GAP-027-IT: æŒ‡æ•¸é€€é¿è¨ˆç®—æ­£ç¢ºæ€§æ¸¬è©¦
- **åç¨±**: æŒ‡æ•¸é€€é¿å»¶é²æ™‚é–“è¨ˆç®—é©—è­‰
- **å„ªå…ˆç´š**: P2
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰æŒ‡æ•¸é€€é¿å…¬å¼æ­£ç¢ºå¯¦ä½œ
- **æ¸¬è©¦å…§å®¹**: é©—è­‰æŒ‡æ•¸é€€é¿è¨ˆç®—é‚è¼¯
- **åˆ¤æ–·æ¨™æº–**: 
  - 3 * (2^n) å…¬å¼æ­£ç¢º
  - æœ€å¤§å»¶é² 20 ç§’é™åˆ¶
  - è¨ˆç®—çµæœæº–ç¢º

### 2.3 æ•ˆèƒ½æ¸¬è©¦ (1å€‹)

#### API-GAP-001-PT: éŸ¿æ‡‰æ™‚é–“æ•ˆèƒ½æ¸¬è©¦ + é—œéµå­—ä¸€è‡´æ€§é©—è­‰ (P50/P95)
- **åç¨±**: é©—è­‰éŸ¿æ‡‰æ™‚é–“ SLA ä¸¦åŒæ™‚æª¢æŸ¥é—œéµå­—è™•ç†æ­£ç¢ºæ€§
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•ˆèƒ½æ¸¬è©¦ï¼ˆæ•´åˆåŠŸèƒ½é©—è­‰ï¼‰
- **æ¸¬è©¦ç›®æ¨™**: 
  - é©—è­‰ P50 < 20ç§’ å’Œ P95 < 30ç§’ çš„ SLA è¦æ±‚
  - ç¢ºä¿æ¯å€‹è«‹æ±‚çš„é—œéµå­—è¼¸å…¥è¼¸å‡ºä¸€è‡´æ€§
- **æ¸¬è©¦å…§å®¹**: 
  - ä½¿ç”¨å”¯ä¸€æ¸¬è©¦è³‡æ–™åŸ·è¡Œ 20 å€‹å¹³è¡Œè«‹æ±‚
  - é—œé–‰è³‡æºæ± å¿«å–ä»¥æ¸¬è©¦çœŸå¯¦æ•ˆèƒ½
  - è¨ˆç®—å®Œæ•´éŸ¿æ‡‰æ™‚é–“åˆ†å¸ƒ
  - **æ–°å¢**ï¼šæ¯å€‹è«‹æ±‚åŒæ™‚é©—è­‰ `len(input_keywords) == len(covered) + len(missed)`
  - **æ–°å¢**ï¼šç¢ºä¿ `set(input_keywords) == set(covered) âˆª set(missed)`
- **åˆä½µç†ç”±**: 
  - æ•´åˆåŸ API-GAP-001-PTã€API-GAP-002-PT å’Œ API-IC-001-PT
  - é¿å…é‡è¤‡ API èª¿ç”¨ï¼Œæé«˜æ¸¬è©¦æ•ˆç‡
  - åŒæ™‚é©—è­‰æ•ˆèƒ½å’ŒåŠŸèƒ½æ­£ç¢ºæ€§
- **åˆ¤æ–·æ¨™æº–**: 
  - **æ•ˆèƒ½æ¨™æº–**ï¼š
    - P50 < 20 ç§’ (ä¸­ä½æ•¸éŸ¿æ‡‰æ™‚é–“)
    - P95 < 30 ç§’ (95ç™¾åˆ†ä½éŸ¿æ‡‰æ™‚é–“) 
    - æˆåŠŸç‡ > 95%
    - ç„¡ timeout éŒ¯èª¤
  - **åŠŸèƒ½æ¨™æº–**ï¼š
    - æ‰€æœ‰ 20 å€‹è«‹æ±‚éƒ½æ»¿è¶³ï¼šè¼¸å‡ºé—œéµå­— (covered + missed) = è¼¸å…¥é—œéµå­—åˆ—è¡¨
    - ç„¡é¡å¤–æˆ–éºå¤±çš„é—œéµå­—
    - å¤§å°å¯«è™•ç†æ­£ç¢º
  - é ä¼°åŸ·è¡Œæ™‚é–“ < 80 ç§’

#### ~~API-GAP-002-PT: P95 éŸ¿æ‡‰æ™‚é–“æ¸¬è©¦~~ [å·²åˆä½µ]
- **ç‹€æ…‹**: âœ… å·²åˆä½µè‡³ API-GAP-001-PT
- **åˆä½µåŸå› **: èˆ‡ API-GAP-001-PT æ¸¬è©¦é‚è¼¯ç›¸åŒï¼Œåˆä½µå¾Œå¯åŒæ™‚è¨ˆç®— P50 å’Œ P95ï¼Œæé«˜æ¸¬è©¦æ•ˆç‡

#### API-GAP-003-PT: è³‡æºæ± é‡ç”¨ç‡æ¸¬è©¦ [å·²åˆªé™¤]
- **ç‹€æ…‹**: âŒ å·²åˆªé™¤ - ç§»è‡³ API-GAP-015-IT
- **åˆªé™¤åŸå› **: æ­¤æ¸¬è©¦é©—è­‰ Python æ‡‰ç”¨å±¤è¡Œç‚ºï¼Œè€Œé Azure æœå‹™æ€§èƒ½ï¼Œæ›´é©åˆä½œç‚ºæ•´åˆæ¸¬è©¦
- **åƒè€ƒ**: è«‹è¦‹ API-GAP-015-IT

#### API-GAP-004-PT: API å‘¼å«æ¸›å°‘é©—è­‰ [å·²åˆªé™¤]
- **ç‹€æ…‹**: âŒ å·²åˆªé™¤ - ç§»è‡³ API-GAP-017-IT
- **åˆªé™¤åŸå› **: æ­¤æ¸¬è©¦é©—è­‰ Python æ‡‰ç”¨å±¤çš„å¿«å–æ©Ÿåˆ¶å’Œè³‡æºæ± æ•ˆæœï¼Œè€Œé Azure æœå‹™æ€§èƒ½ï¼Œæ›´é©åˆä½œç‚ºæ•´åˆæ¸¬è©¦
- **åƒè€ƒ**: è«‹è¦‹ API-GAP-017-IT

#### API-GAP-005-PT: è³‡æºæ± æ“´å±•æ¸¬è©¦ [å·²åˆªé™¤]
- **ç‹€æ…‹**: âŒ å·²åˆªé™¤ - ç§»è‡³ API-GAP-016-IT
- **åˆªé™¤åŸå› **: æ­¤æ¸¬è©¦é©—è­‰ Python æ‡‰ç”¨å±¤è³‡æºæ± æ“´å±•è¡Œç‚ºï¼Œè€Œé Azure æœå‹™æ€§èƒ½ï¼Œæ›´é©åˆä½œç‚ºæ•´åˆæ¸¬è©¦
- **åƒè€ƒ**: è«‹è¦‹ API-GAP-016-IT

### 2.4 ç«¯å°ç«¯æ¸¬è©¦ (2å€‹)

#### API-GAP-001-E2E: å®Œæ•´å·¥ä½œæµç¨‹æ¸¬è©¦
- **åç¨±**: å¾è«‹æ±‚åˆ°å›æ‡‰çš„å®Œæ•´æµç¨‹é©—è­‰
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: E2Eæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: ä½¿ç”¨çœŸå¯¦ Azure API é©—è­‰å®Œæ•´å·¥ä½œæµç¨‹
- **æ¸¬è©¦å…§å®¹**: ä½¿ç”¨å¯¦éš›çš„å±¥æ­·å’Œè·ç¼ºæè¿°ï¼ˆå„ 500+ å­—å…ƒï¼‰åŸ·è¡Œå®Œæ•´çš„å·®è·åˆ†ææµç¨‹
- **é©—è­‰é …ç›®**:
  - API å›æ‡‰æˆåŠŸ (HTTP 200)
  - **æ ¸å¿ƒæ¬„ä½é©—è­‰**ï¼ˆç°¡åŒ–ç‚ºä¸‰å€‹å¿…è¦æ¬„ä½ï¼‰ï¼š
    - `data.raw_similarity_percentage`: number (0-100) - ç›¸ä¼¼åº¦åˆ†æ•¸
    - `data.keyword_coverage`: object - é—œéµå­—è¦†è“‹è³‡è¨Š
    - `data.gap_analysis`: object - å·®è·åˆ†æçµæœ
  - **å¯¦éš›è™•ç†æ™‚é–“æ¸¬é‡**: æ¸¬è©¦æœƒè¨˜éŒ„çœŸå¯¦çš„ API å‘¼å«æ™‚é–“ï¼ˆé æœŸ 12-20 ç§’ï¼‰
- **æ¸¬è©¦è¼¸å‡ºæ‘˜è¦**:
  - ç›¸ä¼¼åº¦åˆ†æ•¸ï¼šé¡¯ç¤ºå¯¦éš›çš„ similarity_percentage å€¼
  - å¯¦éš›è™•ç†æ™‚é–“ï¼šæ¸¬é‡ä¸¦é¡¯ç¤ºçœŸå¯¦çš„ API è™•ç†æ™‚é–“
  - æ ¸å¿ƒæ¬„ä½é©—è­‰ï¼šæª¢æŸ¥ä¸‰å€‹å¿…è¦æ¬„ä½æ˜¯å¦å­˜åœ¨ä¸”æœ‰å€¼ 

### å›æ‡‰ç¯„ä¾‹

```json
{
  "success": true,
  "data": {
    "raw_similarity_percentage": 68,
    "similarity_percentage": 78,
    "keyword_coverage": {
      "total_keywords": 8,
      "covered_count": 3,
      "coverage_percentage": 38,
      "covered_keywords": ["Python", "FastAPI", "Docker"],
      "missed_keywords": ["React", "Kubernetes", "AWS", "CI/CD", "DevOps"]
    },
    "gap_analysis": {
      "CoreStrengths": "<ol><li>Strong Python backend expertise with FastAPI framework</li><li>8+ years of software engineering experience exceeding requirements</li><li>Leadership experience managing development teams</li></ol>",
      "KeyGaps": "<ol><li>Missing React frontend development experience</li><li>No demonstrated Kubernetes container orchestration skills</li><li>Lack of AWS cloud platform experience</li><li>No mention of CI/CD pipeline implementation</li></ol>",
      "QuickImprovements": "<ol><li>Add specific React projects or mention any frontend JavaScript experience</li><li>Include Docker experience and mention any container-related work</li><li>Highlight any cloud platform experience (Azure, GCP) as transferable skills</li><li>Add any automation or deployment pipeline experience</li></ol>",
      "OverallAssessment": "<p>The candidate shows strong backend development skills with 60% higher experience than required. However, significant gaps exist in frontend (React), DevOps (Kubernetes, CI/CD), and cloud (AWS) technologies. With a 38% keyword match, the candidate would need 3-6 months of focused learning to become competitive. Immediate resume improvements and highlighting transferable skills could increase match to 50-60%. Currently positioned as a backend specialist rather than full-stack developer.</p>",
      "SkillSearchQueries": [
        {
          "skill_name": "React",
          "skill_category": "TECHNICAL",
          "description": "Frontend framework for building interactive user interfaces required for full-stack role"
        },
        {
          "skill_name": "Kubernetes",
          "skill_category": "TECHNICAL",
          "description": "Container orchestration platform essential for modern DevOps practices"
        },
        {
          "skill_name": "AWS",
          "skill_category": "TECHNICAL",
          "description": "Cloud platform knowledge required for deploying and managing applications"
        }
      ]
    }
  },
  "error": {
    "code": "",
    "message": "",
    "details": ""
  },
  "timestamp": "2025-08-03T10:30:00.000Z"
}
```



#### API-GAP-002-E2E: è¼•é‡ç´šç›£æ§æ•´åˆæ¸¬è©¦

- **åç¨±**: LIGHTWEIGHT_MONITORING=true ç›£æ§é©—è­‰
- **å„ªå…ˆç´š**: P1
- **é¡å‹**: E2Eæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰è¼•é‡ç´šç›£æ§åœ¨çœŸå¯¦ç’°å¢ƒçš„æ•´åˆ
- **æ¸¬è©¦å…§å®¹**: å•Ÿç”¨è¼•é‡ç´šç›£æ§ï¼ŒåŸ·è¡Œè«‹æ±‚ä¸¦é©—è­‰ç›£æ§äº‹ä»¶
- **åˆ¤æ–·æ¨™æº–**: 
  - IndexCalAndGapAnalysisV2Completed äº‹ä»¶è¢«è¨˜éŒ„
  - processing_time_ms æ­£ç¢ºè¨˜éŒ„
  - version: "v2" æ¨™è¨˜å­˜åœ¨

#### ~~API-GAP-003-E2E: éƒ¨åˆ†çµæœæ”¯æ´é©—è­‰~~ [å·²åˆªé™¤]
- **ç‹€æ…‹**: âŒ **å·²åˆªé™¤** - èˆ‡ç”¢å“ç­–ç•¥çŸ›ç›¾
- **åˆªé™¤åŸå› **: ç”¢å“éœ€æ±‚å·²ç¢ºå®šç‚ºã€Œè¦å˜›å°±å…¨å¤±æ•— è¦å˜›å°±éƒ½æˆåŠŸï¼Œä¸éœ€è¦partial successfulã€
- **ç”¢å“ç­–ç•¥**: ä»»ä¸€æœå‹™å¤±æ•—æ™‚ï¼Œæ•´å€‹ API å¿…é ˆå¤±æ•—ï¼Œç¢ºä¿ç”¨æˆ¶å¾—åˆ°å®Œæ•´ä¸”æœ‰æ„ç¾©çš„çµæœ
- **æ›¿ä»£æ¸¬è©¦**: è«‹åƒè€ƒ API-GAP-009-IT (å®Œæ•´å¤±æ•—è™•ç†æ¸¬è©¦) å’Œ API-GAP-012-UT (Gap Analysis å¤±æ•—è™•ç†)
- **å½±éŸ¿**: E2E æ¸¬è©¦æ•¸é‡å¾ 3 å€‹æ¸›å°‘ç‚º 2 å€‹

## 3. æ¸¬è©¦è³‡æ–™è¦ç¯„

### 3.1 æœ‰æ•ˆæ¸¬è©¦è³‡æ–™è¦æ±‚
- æ‰€æœ‰ Resume å’Œ Job Description å¿…é ˆ â‰¥ 200 å­—å…ƒ
- Resume å»ºè­°ä½¿ç”¨ HTML æ ¼å¼ï¼ˆåŒ…å«æ¨™é¡Œã€æ®µè½ã€åˆ—è¡¨ç­‰çµæ§‹åŒ–å…ƒç´ ï¼‰
- ä½¿ç”¨çœŸå¯¦ä¸”æœ‰æ„ç¾©çš„å…§å®¹
- æ¶µè“‹ä¸åŒè·ä½é¡å‹å’Œç¶“é©—å±¤ç´š

### 3.2 HTML æ ¼å¼ç¯„ä¾‹
```html
<!-- Resume HTML ç¯„ä¾‹ -->
<article>
  <h1>John Doe - Senior Software Engineer</h1>
  <section>
    <h2>Professional Summary</h2>
    <p>Experienced software engineer with <strong>10+ years</strong> in building scalable applications.</p>
  </section>
  <section>
    <h2>Technical Skills</h2>
    <ul>
      <li>Programming: Python, JavaScript, Go</li>
      <li>Frameworks: FastAPI, React, Django</li>
      <li>Cloud: AWS, Azure, GCP</li>
    </ul>
  </section>
</article>
```

### 3.3 ç„¡æ•ˆæ¸¬è©¦è³‡æ–™
- å°‘æ–¼ 200 å­—å…ƒçš„æ–‡æœ¬ï¼ˆç”¨æ–¼é©—è­‰éŒ¯èª¤è™•ç†ï¼‰
- ç©ºå­—ä¸²æˆ–ç´”ç©ºç™½
- éæ–‡å­—å…§å®¹ï¼ˆæ•¸å­—ã€ç¬¦è™Ÿï¼‰

### 3.4 é‚Šç•Œæ¸¬è©¦è³‡æ–™
- æ­£å¥½ 200 å­—å…ƒçš„æ–‡æœ¬
- æ¥è¿‘ä½†ä¸è¶³ 200 å­—å…ƒï¼ˆå¦‚ 199 å­—å…ƒï¼‰
- æ¥µé•·æ–‡æœ¬ï¼ˆ30KBï¼‰

### 3.5 æ•ˆèƒ½æ¸¬è©¦çš„å¿«å–è€ƒé‡

#### é¿å…å¿«å–å½±éŸ¿çœŸå¯¦æ•ˆèƒ½æ¸¬è©¦
1. **P50/P95 éŸ¿æ‡‰æ™‚é–“æ¸¬è©¦**
   - å¿…é ˆé—œé–‰è³‡æºæ± å¿«å–ï¼š`RESOURCE_POOL_ENABLED=false`
   - æ¯å€‹è«‹æ±‚ä½¿ç”¨å®Œå…¨ä¸åŒçš„æ¸¬è©¦è³‡æ–™
   - å»ºè­°åŠ å…¥æ™‚é–“æˆ³æˆ– UUID ç¢ºä¿å”¯ä¸€æ€§

2. **é«˜ä¸¦ç™¼è² è¼‰æ¸¬è©¦**
   - ä½¿ç”¨è«‹æ±‚ ID å€åˆ†ä¸åŒè«‹æ±‚
   - é¿å…ä½¿ç”¨å¾ªç’°çš„æ¸¬è©¦è³‡æ–™æ¨¡å¼
   - é—œéµå­—æ‡‰æœ‰è¶³å¤ çš„è®ŠåŒ–æ€§ï¼ˆä¸åªæ˜¯ `Skill{id % 10}`ï¼‰

3. **è³‡æºæ± æ•ˆèƒ½æ¸¬è©¦**
   - API-GAP-003-PT å’Œ API-GAP-004-PT éœ€è¦é–‹å•Ÿè³‡æºæ± 
   - é€™äº›æ¸¬è©¦å°ˆé–€é©—è­‰è³‡æºæ± æ•ˆæœ

#### æ¸¬è©¦è³‡æ–™æº–å‚™ç­–ç•¥
```python
# éŒ¯èª¤ç¤ºç¯„ï¼šå®¹æ˜“è¢«å¿«å–å‘½ä¸­
for i in range(600):
    data = test_cases[i % 3]  # åªæœ‰ 3 ç¨®ä¸åŒè³‡æ–™
    
# æ­£ç¢ºç¤ºç¯„ï¼šç¢ºä¿å”¯ä¸€æ€§
for i in range(600):
    data = {
        "resume": f"{base_resume} - Request {i} - {time.time_ns()}",
        "jd": f"{base_jd} - Request {i} - {uuid.uuid4()}",
        "keywords": generate_random_keywords(seed=i)
    }
```

## 4. æ¸¬è©¦åŸ·è¡Œè¦ç¯„

### 4.1 å‰ç½®æ¢ä»¶
- ç’°å¢ƒè®Šæ•¸é…ç½®æ­£ç¢ºï¼ˆ.env æª”æ¡ˆï¼‰
- API æœå‹™é‹è¡Œåœ¨ port 8000
- Azure OpenAI æœå‹™å¯ç”¨ï¼ˆæ•ˆèƒ½æ¸¬è©¦å’Œ E2E æ¸¬è©¦éœ€è¦ï¼‰

### 4.2 æ¸¬è©¦è…³æœ¬ç¸½è¦½

æœ¬å°ˆæ¡ˆæä¾›å…©å€‹ä¸»è¦æ¸¬è©¦è…³æœ¬ï¼š

1. **Mock æ¸¬è©¦è…³æœ¬** (`run_index_cal_gap_analysis_unit_integration.sh`)
   - åŸ·è¡Œ **å–®å…ƒæ¸¬è©¦ + æ•´åˆæ¸¬è©¦** (37 å€‹æ¸¬è©¦: 20 UT + 27 IT)
   - ä½¿ç”¨ **Mock æœå‹™**ï¼Œä¸éœ€è¦ Azure OpenAI API
   - åŸ·è¡Œæ™‚é–“ï¼š< 20 ç§’
   - é©åˆé–‹ç™¼éç¨‹ä¸­çš„å¿«é€Ÿé©—è­‰

2. **çœŸå¯¦ API æ¸¬è©¦è…³æœ¬** (`run_index_cal_gap_analysis_real_api_perf_e2e.sh`)
   - åŸ·è¡Œ **æ•ˆèƒ½æ¸¬è©¦ + E2E æ¸¬è©¦** (3 å€‹æ¸¬è©¦: 1 PT + 2 E2E)
   - ä½¿ç”¨ **çœŸå¯¦ Azure OpenAI API**ï¼Œæœƒç”¢ç”Ÿè²»ç”¨
   - åŸ·è¡Œæ™‚é–“ï¼š< 90 ç§’
   - é©åˆå®Œæ•´é©—è­‰å’Œæ•ˆèƒ½æ¸¬è©¦

### 4.3 Mock æ¸¬è©¦åŸ·è¡Œï¼ˆæ¨è–¦ç”¨æ–¼é–‹ç™¼ï¼‰

#### åŸºæœ¬ç”¨æ³•
```bash
# åŸ·è¡Œæ‰€æœ‰ 47 å€‹ Mock æ¸¬è©¦ï¼ˆ20 UT + 27 ITï¼‰
./test/scripts/run_index_cal_gap_analysis_unit_integration.sh

# åªåŸ·è¡Œå–®å…ƒæ¸¬è©¦ (20 å€‹)
./test/scripts/run_index_cal_gap_analysis_unit_integration.sh --stage unit

# åªåŸ·è¡Œæ•´åˆæ¸¬è©¦ (27 å€‹)
./test/scripts/run_index_cal_gap_analysis_unit_integration.sh --stage integration

# è©³ç´°è¼¸å‡ºæ¨¡å¼
./test/scripts/run_index_cal_gap_analysis_unit_integration.sh --verbose
```

#### Mock æ¸¬è©¦å„ªå‹¢
- âœ… **ç„¡éœ€ API è²»ç”¨**ï¼šå®Œå…¨ä½¿ç”¨ Mock æœå‹™
- âœ… **åŸ·è¡Œå¿«é€Ÿ**ï¼šæ‰€æœ‰æ¸¬è©¦åœ¨ 20 ç§’å…§å®Œæˆ
- âœ… **ç©©å®šçµæœ**ï¼šä¸å—ç¶²è·¯æˆ– API é™åˆ¶å½±éŸ¿
- âœ… **é–‹ç™¼å‹å¥½**ï¼šé©åˆ TDD å’Œå¿«é€Ÿè¿­ä»£

### 4.4 çœŸå¯¦ API æ¸¬è©¦åŸ·è¡Œï¼ˆç”¨æ–¼å®Œæ•´é©—è­‰ï¼‰

#### åŸºæœ¬ç”¨æ³•
```bash
# åŸ·è¡Œæ‰€æœ‰ 3 å€‹çœŸå¯¦ API æ¸¬è©¦ï¼ˆ1 PT + 2 E2Eï¼‰
./test/scripts/run_index_cal_gap_analysis_real_api_perf_e2e.sh

# åªåŸ·è¡Œæ•ˆèƒ½æ¸¬è©¦ (1 å€‹)
./test/scripts/run_index_cal_gap_analysis_real_api_perf_e2e.sh --stage performance

# åªåŸ·è¡Œ E2E æ¸¬è©¦ (3 å€‹)
./test/scripts/run_index_cal_gap_analysis_real_api_perf_e2e.sh --stage e2e

# èƒŒæ™¯åŸ·è¡Œï¼ˆé•·æ™‚é–“æ¸¬è©¦ï¼‰
./test/scripts/run_index_cal_gap_analysis_real_api_perf_e2e.sh --background
```

#### æ•ˆèƒ½æ¸¬è©¦å¿«é€ŸåŸ·è¡Œ

##### åŸ·è¡Œç‰¹å®šæ•ˆèƒ½æ¸¬è©¦
```bash
# P50 æ¸¬è©¦ (ä¸­ä½æ•¸éŸ¿æ‡‰æ™‚é–“)
./test/scripts/run_index_cal_gap_analysis_real_api_perf_e2e.sh --perf-test p50
./test/scripts/run_index_cal_gap_analysis_real_api_perf_e2e.sh --perf-test API-GAP-001-PT

# API-GAP-001-PT æ•´åˆæ¸¬è©¦ (P50/P95 + é—œéµå­—ä¸€è‡´æ€§)
./test/scripts/run_index_cal_gap_analysis_real_api_perf_e2e.sh --perf-test API-GAP-001-PT

# åŒæ™‚åŸ·è¡Œ P50 å’Œ P95 (å·²æ•´åˆåˆ° API-GAP-001-PT)
./test/scripts/run_index_cal_gap_analysis_real_api_perf_e2e.sh --perf-test "p50,p95"
```

##### é€²éšé¸é …
```bash
# è©³ç´°è¼¸å‡ºæ¨¡å¼
./test/scripts/run_index_cal_gap_analysis_real_api_perf_e2e.sh --perf-test "p50,p95" --verbose

# èƒŒæ™¯åŸ·è¡Œï¼ˆæ¨è–¦ç”¨æ–¼æ•ˆèƒ½æ¸¬è©¦ï¼‰
./test/scripts/run_index_cal_gap_analysis_real_api_perf_e2e.sh --perf-test "p50,p95" --background

# æŸ¥çœ‹èƒŒæ™¯åŸ·è¡Œç‹€æ…‹
tail -f test/logs/test_suite_real_api_perf_e2e_*.log
```

#### æ•ˆèƒ½æ¸¬è©¦æ³¨æ„äº‹é …
1. **çœŸå¯¦ API æ¸¬è©¦**ï¼šæ•ˆèƒ½æ¸¬è©¦ä½¿ç”¨çœŸå¯¦çš„ Azure OpenAI APIï¼Œæœƒç”¢ç”Ÿå¯¦éš›è²»ç”¨
5. **æ¸¬è©¦ç›®æ¨™**ï¼ˆâœ… èª¿æ•´ç‚ºç¬¦åˆçœŸå¯¦ LLM APIï¼‰ï¼š
   - âœ… API-GAP-001-PT: éŸ¿æ‡‰æ™‚é–“æ•ˆèƒ½æ¸¬è©¦ (P50/P95): ç›®æ¨™ç´„ 80-90 ç§’
   - âš ï¸ **å·²é·ç§»**: API-GAP-003/004/005-PT å·²ç§»è‡³æ•´åˆæ¸¬è©¦ (API-GAP-015/016/017-IT)
   - âœ… **æ•´åˆæ¸¬è©¦é©—è­‰**: è³‡æºæ± åŠŸèƒ½ç¾ç”±æ•´åˆæ¸¬è©¦é©—è­‰ï¼Œä½¿ç”¨ Mock æœå‹™ï¼Œç¯€çœæˆæœ¬

### 4.5 æ¸¬è©¦è…³æœ¬é€²éšç”¨æ³•

#### Mock æ¸¬è©¦è…³æœ¬é€²éšç”¨æ³•
```bash
# åŸ·è¡Œå–®å…ƒæ¸¬è©¦å’Œæ•´åˆæ¸¬è©¦ï¼ˆé è¨­è¡Œç‚ºï¼‰
./test/scripts/run_index_cal_gap_analysis_unit_integration.sh

# è©³ç´°è¼¸å‡ºæ¨¡å¼
./test/scripts/run_index_cal_gap_analysis_unit_integration.sh --verbose

# æŸ¥çœ‹å¹«åŠ©è³‡è¨Š
./test/scripts/run_index_cal_gap_analysis_unit_integration.sh --help
```

#### çœŸå¯¦ API æ¸¬è©¦è…³æœ¬é€²éšç”¨æ³•
```bash
# åŸ·è¡Œæ•ˆèƒ½æ¸¬è©¦å’Œ E2E æ¸¬è©¦ï¼ˆé è¨­è¡Œç‚ºï¼‰
./test/scripts/run_index_cal_gap_analysis_real_api_perf_e2e.sh

# èƒŒæ™¯åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦
./test/scripts/run_index_cal_gap_analysis_real_api_perf_e2e.sh --background

# æŸ¥çœ‹å¹«åŠ©è³‡è¨Š
./test/scripts/run_index_cal_gap_analysis_real_api_perf_e2e.sh --help
```

#### é™¤éŒ¯èˆ‡ç›£æ§
```bash
# Mock æ¸¬è©¦è©³ç´°è¼¸å‡º
./test/scripts/run_index_cal_gap_analysis_unit_integration.sh --verbose

# çœŸå¯¦ API æ¸¬è©¦è©³ç´°è¼¸å‡º
./test/scripts/run_index_cal_gap_analysis_real_api_perf_e2e.sh --verbose

# èƒŒæ™¯åŸ·è¡Œä¸¦ç›£æ§
./test/scripts/run_index_cal_gap_analysis_real_api_perf_e2e.sh --background
tail -f test/logs/test_suite_real_api_perf_e2e_*.log

# æŸ¥çœ‹æœ€æ–°æ¸¬è©¦çµæœ
ls -lt test/logs/*.log | head -10
```

#### æ¸¬è©¦çµæœåˆ†æ
```bash
# æŸ¥çœ‹æœ€æ–°çš„æ•ˆèƒ½æ¸¬è©¦çµæœ
cat test/logs/performance_API-GAP-001-PT_*.json | jq '.'

# æŸ¥çœ‹æ•´åˆæ¸¬è©¦çµæœ
ls -la test/logs/test_suite_unit_integration_*.log

# æŸ¥çœ‹çœŸå¯¦ API æ¸¬è©¦çµæœ  
ls -la test/logs/test_suite_real_api_perf_e2e_*.log

# çµ±è¨ˆæ¸¬è©¦åŸ·è¡Œæ™‚é–“è¶¨å‹¢
grep "p50_time_s" test/logs/performance_API-GAP-001-PT_*.json
```

### 4.6 æ¸¬è©¦åŸ·è¡Œæœ€ä½³å¯¦è¸

#### æ¨è–¦åŸ·è¡Œé †åº
```bash
# 1. é–‹ç™¼éšæ®µï¼šå¿«é€Ÿé©—è­‰ï¼ˆMock æ¸¬è©¦ï¼‰
./test/scripts/run_index_cal_gap_analysis_unit_integration.sh

# 2. æäº¤å‰ï¼šå®Œæ•´é©—è­‰ï¼ˆçœŸå¯¦ API æ¸¬è©¦ï¼‰
./test/scripts/run_index_cal_gap_analysis_real_api_perf_e2e.sh

# 3. æ•ˆèƒ½è©•ä¼°ï¼šåªåŸ·è¡Œæ•ˆèƒ½æ¸¬è©¦
./test/scripts/run_index_cal_gap_analysis_real_api_perf_e2e.sh --stage performance
```

#### æ¸¬è©¦åŸ·è¡Œå„ªåŒ–æŠ€å·§
1. **Mock æ¸¬è©¦å„ªå‹¢**ï¼š
   - 37 å€‹æ¸¬è©¦åœ¨ 20 ç§’å…§å®Œæˆ
   - ç„¡ API è²»ç”¨å’Œç¶²è·¯å»¶é²
   - é©åˆé »ç¹åŸ·è¡Œå’Œ CI/CD

2. **çœŸå¯¦ API æ¸¬è©¦æ³¨æ„äº‹é …**ï¼š
   - API-GAP-001-PTï¼š20 å€‹è«‹æ±‚å¹³è¡ŒåŸ·è¡Œï¼ŒåŒæ™‚è¨ˆç®— P50/P95 ä¸¦é©—è­‰é—œéµå­—ï¼Œç´„ 80-90 ç§’
   - ä½¿ç”¨çœŸå¯¦ Azure OpenAI APIï¼Œæœƒç”¢ç”Ÿè²»ç”¨

3. **è³‡æºæ± åŠŸèƒ½æ¸¬è©¦**ï¼š
   - API-GAP-015/016/017-IT å·²ç§»è‡³æ•´åˆæ¸¬è©¦
   - ä½¿ç”¨ Mock æœå‹™ï¼Œå¿«é€Ÿé©—è­‰åŠŸèƒ½æ­£ç¢ºæ€§
   - ä¸å†éœ€è¦å¤§é‡çœŸå¯¦ API èª¿ç”¨

#### å¸¸è¦‹å•é¡Œæ’é™¤
```bash
# Mock æ¸¬è©¦å¤±æ•—
./test/scripts/run_index_cal_gap_analysis_unit_integration.sh --verbose

# çœŸå¯¦ API æ¸¬è©¦è¶…æ™‚
# æª¢æŸ¥ç¶²è·¯é€£æ¥å’Œ API é…é¡
./test/scripts/run_index_cal_gap_analysis_real_api_perf_e2e.sh --verbose

# API é€Ÿç‡é™åˆ¶å•é¡Œ
# æ¸›å°‘ä½µç™¼æ•¸æˆ–å¢åŠ è«‹æ±‚é–“éš”
export MAX_WORKERS=3  # é è¨­ç‚º 5

# æŸ¥çœ‹æ¸¬è©¦æ—¥èªŒ
tail -100 test/logs/test_suite_*.log
```

### 4.7 æ¸¬è©¦æ¨™è¨˜
```python
@pytest.mark.gap_analysis  # æ‰€æœ‰ Gap Analysis æ¸¬è©¦
@pytest.mark.unit          # å–®å…ƒæ¸¬è©¦
@pytest.mark.integration   # æ•´åˆæ¸¬è©¦
@pytest.mark.performance   # æ•ˆèƒ½æ¸¬è©¦
@pytest.mark.e2e          # ç«¯å°ç«¯æ¸¬è©¦
@pytest.mark.p0           # P0 å„ªå…ˆç´š
```

## 5. æ¸¬è©¦å ±å‘Šèˆ‡é©—è­‰çµæœ

### 5.1 æ¸¬è©¦è¦†è“‹ç‡ç›®æ¨™ï¼ˆâœ… å·²é”æˆï¼‰
- âœ… å–®å…ƒæ¸¬è©¦è¦†è“‹ç‡: 100% (20/20 æ¸¬è©¦é€šé)
- âœ… æ•´åˆæ¸¬è©¦è¦†è“‹ç‡: 100% (17/17 æ¸¬è©¦é€šé)
- âœ… æ•´é«”æ¸¬è©¦è¦†è“‹ç‡: 100% (37/37 Mock æ¸¬è©¦é€šé)

### 5.2 æ¸¬è©¦çµæœå ±å‘Šï¼ˆâœ… å·²é©—è­‰ï¼‰
æ¸¬è©¦åŸ·è¡Œå¾Œå·²ç”ŸæˆåŒ…å«ä»¥ä¸‹è³‡è¨Šçš„å ±å‘Šï¼š
- âœ… åŸ·è¡Œçš„æ¸¬è©¦æ¡ˆä¾‹æ•¸é‡: 37 å€‹ (20 UT + 17 IT)
- âœ… æˆåŠŸ/å¤±æ•—/è·³éçš„æ•¸é‡: 37 é€šé / 0 å¤±æ•— / 0 è·³é
- âœ… åŸ·è¡Œæ™‚é–“: 28 ç§’ (ç¬¦åˆ < 30 ç§’çš„ç›®æ¨™)
- âœ… å¤±æ•—æ¸¬è©¦çš„è©³ç´°è³‡è¨Š: ç„¡ï¼ˆæ‰€æœ‰æ¸¬è©¦é€šéï¼‰
- âœ… æ•ˆèƒ½æ¸¬è©¦çš„çµ±è¨ˆæ•¸æ“š: å·²å¯¦ä½œå®Œæˆï¼Œæ”¯æ´ JSON æ ¼å¼è¼¸å‡º

## 6. æ¸¬è©¦é–‹ç™¼æœ€ä½³å¯¦è¸

### 6.1 ç¨‹å¼ç¢¼å“è³ªæ¨™æº– (Ruff)

#### å¼·åˆ¶è¦æ±‚
1. **æ¸¬è©¦å‰æª¢æŸ¥**: æ’°å¯«æ¸¬è©¦ç¨‹å¼ç¢¼å‰ï¼Œå…ˆåŸ·è¡Œ `ruff check test/`
2. **æäº¤å‰æª¢æŸ¥**: æäº¤ç¨‹å¼ç¢¼å‰ï¼Œå¿…é ˆåŸ·è¡Œä¸¦é€šéï¼š
   ```bash
   ruff check test/ --line-length=120
   # å¿…é ˆé¡¯ç¤º "All checks passed!"
   ```
3. **è‡ªå‹•ä¿®å¾©**: ä½¿ç”¨ `ruff check test/ --fix` è‡ªå‹•ä¿®å¾©å¯ä¿®å¾©çš„å•é¡Œ

#### Ruff é…ç½®èªªæ˜
```toml
# pyproject.toml ä¸­çš„æ¸¬è©¦ç›¸é—œè¨­å®š
[tool.ruff.lint.per-file-ignores]
"test/**/*.py" = [
    "E501",    # è¡Œé•·åº¦ï¼ˆå·²åœ¨å…¨åŸŸè¨­å®šç‚º 120ï¼‰
    "F401",    # æœªä½¿ç”¨çš„ importï¼ˆæ¸¬è©¦ä¸­å¯èƒ½éœ€è¦ï¼‰
    "SIM117",  # å¤šé‡ with èªå¥ï¼ˆPython 3.11 æ”¯æ´ï¼‰
    "S101",    # assert ä½¿ç”¨ï¼ˆæ¸¬è©¦å¿…éœ€ï¼‰
    "RUF001",  # å…¨å½¢ç¬¦è™Ÿï¼ˆä¸­æ–‡æ¸¬è©¦è³‡æ–™ï¼‰
    "RUF002",  # å…¨å½¢ç¬¦è™Ÿåœ¨ docstringï¼ˆä¸­æ–‡èªªæ˜ï¼‰
    "S105"     # ç¡¬ç·¨ç¢¼å¯†é‘°ï¼ˆæ¸¬è©¦ç’°å¢ƒå¯æ¥å—ï¼‰
]
```

### 6.2 æ¸¬è©¦æ’°å¯«è¦ç¯„

#### ç¨‹å¼ç¢¼é¢¨æ ¼
1. **Import æ’åº**: ä½¿ç”¨ isort è¦å‰‡ï¼ŒRuff æœƒè‡ªå‹•è™•ç†
2. **å‹åˆ¥è¨»è§£**: ä½¿ç”¨ Python 3.10+ èªæ³•ï¼ˆ`X | None` è€Œé `Optional[X]`ï¼‰
3. **æœªä½¿ç”¨è®Šæ•¸**: ä½¿ç”¨ `_` è¡¨ç¤ºæ•…æ„ä¸ä½¿ç”¨çš„è®Šæ•¸
4. **é¡åˆ¥å±¬æ€§**: å¯è®Šé¡åˆ¥å±¬æ€§éœ€åŠ ä¸Š `ClassVar` è¨»è§£

#### æ¸¬è©¦çµæ§‹
1. **æ¸¬è©¦å‡½æ•¸å‘½å**: `test_<åŠŸèƒ½>_<å ´æ™¯>_<é æœŸçµæœ>`
2. **æ¸¬è©¦é¡åˆ¥**: æŒ‰åŠŸèƒ½æ¨¡çµ„çµ„ç¹”æ¸¬è©¦é¡åˆ¥
3. **Fixture ä½¿ç”¨**: å–„ç”¨ pytest fixtures é¿å…é‡è¤‡ç¨‹å¼ç¢¼
4. **æ¸¬è©¦éš”é›¢**: æ¯å€‹æ¸¬è©¦å¿…é ˆç¨ç«‹ï¼Œä¸ä¾è³´å…¶ä»–æ¸¬è©¦

### 6.3 é–‹ç™¼æµç¨‹

1. **æ’°å¯«æ¸¬è©¦å‰**
   ```bash
   # ç¢ºèª Ruff è¨­å®š
   cat pyproject.toml | grep -A 10 "tool.ruff"
   
   # æª¢æŸ¥ç¾æœ‰ç¨‹å¼ç¢¼å“è³ª
   ruff check test/
   ```

2. **æ’°å¯«æ¸¬è©¦æ™‚**
   - éµå¾ª AAA æ¨¡å¼ï¼ˆArrange, Act, Assertï¼‰
   - ä½¿ç”¨æœ‰æ„ç¾©çš„æ¸¬è©¦è³‡æ–™
   - åŠ å…¥é©ç•¶çš„éŒ¯èª¤è¨Šæ¯

3. **å®Œæˆæ¸¬è©¦å¾Œ**
   ```bash
   # åŸ·è¡Œ Ruff æª¢æŸ¥
   ruff check test/<your_test_file>.py --line-length=120
   
   # è‡ªå‹•ä¿®å¾©å•é¡Œ
   ruff check test/<your_test_file>.py --fix
   
   # åŸ·è¡Œæ¸¬è©¦
   pytest test/<your_test_file>.py -v
   ```

4. **æäº¤å‰æª¢æŸ¥æ¸…å–®**
   - [ ] æ‰€æœ‰æ¸¬è©¦é€šé
   - [ ] Ruff æª¢æŸ¥ç„¡éŒ¯èª¤
   - [ ] æ¸¬è©¦è¦†è“‹ç‡ç¬¦åˆè¦æ±‚
   - [ ] æ¸¬è©¦åŸ·è¡Œæ™‚é–“ç¬¦åˆé™åˆ¶
   - [ ] æ¸¬è©¦è³‡æ–™ç¬¦åˆæœ€å°é•·åº¦è¦æ±‚

---

## é™„éŒ„ï¼šæ¸¬è©¦é©—è­‰çµæœ

### æœ€æ–°é©—è­‰çµæœ (2025-08-05)

#### Mock æ¸¬è©¦é©—è­‰ âœ…
```
åŸ·è¡Œæ—¥æœŸ: 2025-08-05 10:52:44
æ¸¬è©¦ç¸½æ•¸: 37 å€‹æ¸¬è©¦æ¡ˆä¾‹ (20 Unit + 17 Integration)
åŸ·è¡Œç’°å¢ƒ: Python 3.11.8
ç¸½åŸ·è¡Œæ™‚é–“: 28s

æ¸¬è©¦æ‘˜è¦:
ç¸½æ¸¬è©¦æ•¸: 37 / 37
é€šé: 37 (100%)
å¤±æ•—: 0
è·³é: 0

æ¸¬è©¦é¡å‹çµ±è¨ˆ:
å–®å…ƒæ¸¬è©¦ (Unit): 20/20 (100%) - è¦æ ¼è¦æ±‚: 20
æ•´åˆæ¸¬è©¦ (Integration): 17/17 (100%) - è¦æ ¼è¦æ±‚: 17

å„ªå…ˆç´šçµ±è¨ˆ:
P0 (Critical): 23/23 (100%)
P1 (Important): 8/8 (100%)
P2 (Nice to have): 3/3 (100%)

çµæœ: ğŸ‰ æ‰€æœ‰ 37 å€‹ Unit & Integration æ¸¬è©¦å…¨éƒ¨é€šéï¼
```

#### çœŸå¯¦ API æ¸¬è©¦å¯¦ä½œ âœ…
```
å¯¦ä½œç‹€æ…‹: å·²å®Œæˆå¯¦ä½œ
æ¸¬è©¦ç¯„åœ: 3 å€‹æ¸¬è©¦ (1 Performance + 2 E2E)
æ”¯æ´åŠŸèƒ½:
- âœ… P50/P95 + é—œéµå­—ä¸€è‡´æ€§æ•´åˆæ¸¬è©¦ (API-GAP-001-PT)  
- âœ… E2E å®Œæ•´æµç¨‹æ¸¬è©¦ (API-GAP-001-E2E)
- âœ… è¼•é‡ç´šç›£æ§æ¸¬è©¦ (API-GAP-002-E2E)
- âŒ ~~éƒ¨åˆ†çµæœæ”¯æ´æ¸¬è©¦ (API-GAP-003-E2E)~~ - å·²åˆªé™¤ï¼Œèˆ‡ç”¢å“ç­–ç•¥çŸ›ç›¾
- âœ… èƒŒæ™¯åŸ·è¡Œæ¨¡å¼
- âœ… å…·é«”æ•ˆèƒ½æ¸¬è©¦é¸é … (--perf-test)
```

### æ¸¬è©¦è…³æœ¬ä½¿ç”¨çµ±è¨ˆ

#### Mock æ¸¬è©¦è…³æœ¬ (`run_index_cal_gap_analysis_unit_integration.sh`)
- âœ… **å®Œå…¨é©—è­‰**: æ‰€æœ‰ 37 å€‹æ¸¬è©¦ 100% é€šé
- âœ… **ç©©å®šæ€§èƒ½**: åŸ·è¡Œæ™‚é–“ç©©å®šåœ¨ 28-30 ç§’
- âœ… **ç„¡æˆæœ¬**: ä½¿ç”¨ Mock æœå‹™ï¼Œç„¡ API è²»ç”¨
- âœ… **é–‹ç™¼å‹å¥½**: é©åˆé »ç¹åŸ·è¡Œå’Œ CI/CD

#### çœŸå¯¦ API æ¸¬è©¦è…³æœ¬ (`run_index_cal_gap_analysis_real_api_perf_e2e.sh`)
- âœ… **å®Œæ•´å¯¦ä½œ**: æ”¶å«æ‰€æœ‰ 5 å€‹çœŸå¯¦ API æ¸¬è©¦
- âœ… **æ•ˆèƒ½æ¸¬è©¦**: P50/P95 æ•ˆèƒ½æ¸¬è©¦å®Œæ•´å¯¦ä½œ
- âœ… **èƒŒæ™¯åŸ·è¡Œ**: æ”¯æ´é•·æ™‚é–“æ¸¬è©¦çš„èƒŒæ™¯åŸ·è¡Œ
- âœ… **ç²¾ç¢ºæ§åˆ¶**: æ”¯æ´ç‰¹å®šæ¸¬è©¦é¸æ“‡åŸ·è¡Œ

---

## éŒ¯èª¤ç¢¼å°ç…§è¡¨

### æ¨™æº– HTTP éŒ¯èª¤ç¢¼ vs Gap Analysis å¯¦ä½œå°ç…§

| éŒ¯èª¤é¡å‹ | æ¨™æº–å»ºè­°ç‹€æ…‹ç¢¼ | Gap Analysis å¯¦ä½œ | ç¬¦åˆæ€§ | ç›¸é—œæ¸¬è©¦æ¡ˆä¾‹ |
|---------|----------------|-------------------|--------|-------------|
| **è«‹æ±‚æ ¼å¼éŒ¯èª¤** | 400 Bad Request | 400 Bad Request | âœ… ç¬¦åˆ | API-GAP-002-IT, API-GAP-003-IT |
| **æ–‡å­—å¤ªçŸ­** | 422 Unprocessable Entity (Pydanticé©—è­‰) | 422 Unprocessable Entity | âœ… ç¬¦åˆ | API-GAP-002-IT, API-GAP-003-IT |
| **ç„¡æ•ˆèªè¨€** | 422 Unprocessable Entity (Pydanticé©—è­‰) | 422 Unprocessable Entity | âœ… ç¬¦åˆ | API-GAP-006-IT |
| **JSON è§£æéŒ¯èª¤** | 400 Bad Request | 422 Unprocessable Entity | âŒ ä¸ç¬¦ | (éœ€è¦èª¿æ•´) |
| **èªè­‰å¤±æ•—** | 401 Unauthorized | 401 Unauthorized | âœ… ç¬¦åˆ | API-GAP-014-IT |
| **æ¬Šé™ä¸è¶³** | 403 Forbidden | 403 Forbidden | âœ… ç¬¦åˆ | (é ç•™) |
| **é©—è­‰éŒ¯èª¤** | 422 Unprocessable Entity | 422 Unprocessable Entity | âœ… ç¬¦åˆ | API-GAP-022-IT |
| **é€Ÿç‡é™åˆ¶** | 429 Too Many Requests | 429 Too Many Requests | âœ… ç¬¦åˆ | API-GAP-011-IT, API-GAP-019-IT |
| **æœå‹™éŒ¯èª¤** | 500 Internal Server Error | 500 Internal Server Error | âœ… ç¬¦åˆ | API-GAP-021-IT |
| **å¤–éƒ¨æœå‹™éŒ¯èª¤** | 502 Bad Gateway | 502 Bad Gateway | âœ… ç¬¦åˆ | (é ç•™) |
| **æœå‹™ä¸å¯ç”¨** | 503 Service Unavailable | 503 Service Unavailable | âœ… ç¬¦åˆ | (é ç•™) |
| **è«‹æ±‚è¶…æ™‚** | 504 Gateway Timeout | 504 Gateway Timeout | âœ… ç¬¦åˆ | API-GAP-020-IT |

### éŒ¯èª¤è™•ç†æ©Ÿåˆ¶å°ç…§

| éŒ¯èª¤è™•ç†æ©Ÿåˆ¶ | Index Calculation V2 | Gap Analysis | å·®ç•°èªªæ˜ |
|-------------|---------------------|--------------|----------|
| **èªè­‰éŒ¯èª¤è™•ç†** | è‡ªå®šç¾© `AuthenticationError` ä¿ç•™åŸå§‹ç‹€æ…‹ç¢¼ | å¾…å¯¦ä½œ | Gap Analysis éœ€è¦ç›¸åŒè™•ç† |
| **å¤–éƒ¨æœå‹™éŒ¯èª¤** | è‡ªå®šç¾© `ExternalServiceError` â†’ 502 | å¾…å¯¦ä½œ | Gap Analysis éœ€è¦ç›¸åŒè™•ç† |
| **JSON è§£æéŒ¯èª¤** | ç‰¹æ®Šè™•ç†è¿”å› 400 | è¿”å› 422 | Gap Analysis éœ€è¦èª¿æ•´ç‚º 400 |
| **é‡è©¦æ©Ÿåˆ¶** | ä½¿ç”¨çµ±ä¸€é‡è©¦ç­–ç•¥ | ä½¿ç”¨ AdaptiveRetryStrategy | å¯¦ä½œæ–¹å¼ä¸åŒä½†åŠŸèƒ½ç›¸ä¼¼ |
| **éŒ¯èª¤åˆ†é¡** | æŒ‰ HTTP ç‹€æ…‹ç¢¼åˆ†é¡ | æŒ‰éŒ¯èª¤é¡å‹åˆ†é¡ï¼ˆtimeout, rate_limitç­‰ï¼‰ | åˆ†é¡ç¶­åº¦ä¸åŒ |

### å»ºè­°èª¿æ•´é …ç›®

1. **JSON è§£æéŒ¯èª¤** (é«˜å„ªå…ˆç´š)
   - ç•¶å‰ï¼š422 Unprocessable Entity
   - å»ºè­°ï¼š400 Bad Request
   - åŸå› ï¼šJSON æ ¼å¼éŒ¯èª¤å±¬æ–¼è«‹æ±‚æ ¼å¼å•é¡Œï¼Œæ‡‰è¿”å› 400

2. **èªè­‰éŒ¯èª¤è™•ç†** (ä¸­å„ªå…ˆç´š)
   - ç•¶å‰ï¼šå¯èƒ½çµ±ä¸€è¿”å›æŸå€‹éŒ¯èª¤ç¢¼
   - å»ºè­°ï¼šå¯¦ä½œé¡ä¼¼ `AuthenticationError` çš„æ©Ÿåˆ¶ï¼Œä¿ç•™åŸå§‹ 401/403 ç‹€æ…‹ç¢¼
   - ç›¸é—œæ¸¬è©¦ï¼šéœ€è¦æ–°å¢æ¸¬è©¦æ¡ˆä¾‹

3. **å¤–éƒ¨æœå‹™éŒ¯èª¤** (ä¸­å„ªå…ˆç´š)
   - ç•¶å‰ï¼šå¯èƒ½è¿”å› 500
   - å»ºè­°ï¼šè¿”å› 502 Bad Gateway
   - åŸå› ï¼šæ˜ç¢ºå€åˆ†å…§éƒ¨éŒ¯èª¤å’Œå¤–éƒ¨ä¾è³´éŒ¯èª¤

## 6. Resume Structure Analysis æ¸¬è©¦æ¡ˆä¾‹ (V4)

### 6.1 å–®å…ƒæ¸¬è©¦ (RS-xxx-UT)

#### RS-001-UT: åŸºæœ¬çµæ§‹åˆ†ææ¸¬è©¦
- **åç¨±**: Resume Structure Analyzer åŸºæœ¬åŠŸèƒ½é©—è­‰
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰å±¥æ­·çµæ§‹è­˜åˆ¥çš„æ ¸å¿ƒåŠŸèƒ½
- **æ¸¬è©¦å…§å®¹**: æ¸¬è©¦è­˜åˆ¥æ¨™æº–å±¥æ­·å€æ®µï¼ˆSummaryã€Skillsã€Experienceã€Educationç­‰ï¼‰
- **åˆ¤æ–·æ¨™æº–**: 
  - æ­£ç¢ºè­˜åˆ¥å­˜åœ¨çš„å€æ®µæ¨™é¡Œ
  - ä¸å­˜åœ¨çš„å€æ®µè¿”å› null
  - è‡ªè¨‚å€æ®µåˆ—è¡¨æ­£ç¢º

#### RS-002-UT: Prompt æ¨¡æ¿é©—è­‰æ¸¬è©¦
- **åç¨±**: Prompt é…ç½®è¼‰å…¥å’Œæ ¼å¼é©—è­‰
- **å„ªå…ˆç´š**: P1
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ prompt æ¨¡æ¿æ­£ç¢ºè¼‰å…¥å’Œæ ¼å¼åŒ–
- **æ¸¬è©¦å…§å®¹**: æ¸¬è©¦ prompt æ¨¡æ¿çµæ§‹ã€ä½”ä½ç¬¦ã€fallback æ©Ÿåˆ¶
- **åˆ¤æ–·æ¨™æº–**: 
  - system prompt å­˜åœ¨ä¸”æ ¼å¼æ­£ç¢º
  - user prompt åŒ…å« {resume_html} ä½”ä½ç¬¦
  - fallback prompt å¯æ­£å¸¸ä½¿ç”¨

#### RS-003-UT: JSON è§£æé©—è­‰æ¸¬è©¦
- **åç¨±**: LLM å›æ‡‰ JSON è§£æå’ŒéŒ¯èª¤è™•ç†
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ JSON è§£æé‚è¼¯å’ŒéŒ¯èª¤è™•ç†
- **æ¸¬è©¦å…§å®¹**: æ¸¬è©¦ä¸åŒæ ¼å¼çš„ JSON å›æ‡‰ï¼ˆå« markdown code blockï¼‰
- **åˆ¤æ–·æ¨™æº–**: 
  - æ­£ç¢ºè§£ææ¨™æº– JSON
  - è™•ç† ```json åŒ…è£çš„å…§å®¹
  - æ ¼å¼éŒ¯èª¤æ™‚æ‹‹å‡º JSONDecodeError

#### RS-004-UT: é‡è©¦æ©Ÿåˆ¶æ¸¬è©¦
- **åç¨±**: 3 æ¬¡é‡è©¦æ©Ÿåˆ¶èˆ‡å»¶é²ç­–ç•¥é©—è­‰
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰å¤±æ•—æ™‚çš„é‡è©¦é‚è¼¯
- **æ¸¬è©¦å…§å®¹**: æ¨¡æ“¬å¤±æ•—å ´æ™¯ï¼Œé©—è­‰é‡è©¦æ¬¡æ•¸å’Œå»¶é²
- **åˆ¤æ–·æ¨™æº–**: 
  - æœ€å¤šé‡è©¦ 3 æ¬¡
  - é‡è©¦å»¶é² 500ms
  - ç¬¬ 3 æ¬¡æˆåŠŸæ™‚è¿”å›çµæœ

#### RS-005-UT: Fallback çµæ§‹æ¸¬è©¦
- **åç¨±**: å®Œå…¨å¤±æ•—æ™‚çš„ fallback çµæ§‹ç”Ÿæˆ
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰æ‰€æœ‰é‡è©¦å¤±æ•—å¾Œçš„ fallback æ©Ÿåˆ¶
- **æ¸¬è©¦å…§å®¹**: æ¨¡æ“¬æŒçºŒå¤±æ•—ï¼Œé©—è­‰ fallback çµæ§‹
- **åˆ¤æ–·æ¨™æº–**: 
  - 3 æ¬¡é‡è©¦éƒ½å¤±æ•—å¾Œå•Ÿå‹• fallback
  - è¿”å›é è¨­çµæ§‹ï¼ˆåŸºæœ¬å€æ®µï¼‰
  - metadata é¡¯ç¤º unknown/0 å€¼

### 6.2 æ•´åˆæ¸¬è©¦ (RS-xxx-IT)

#### RS-001-IT: ä¸¦è¡ŒåŸ·è¡Œæ™‚é–“æ¸¬è©¦
- **åç¨±**: Parallel Execution Timing é©—è­‰
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ä¸¦è¡Œä»»å‹™åŸ·è¡Œæ™‚é–“ï¼Œç¢ºä¿çµæ§‹åˆ†æä¸å¢åŠ å»¶é²
- **æ¸¬è©¦å…§å®¹**: æ¨¡æ“¬ä¸åŒæœå‹™åŸ·è¡Œæ™‚é–“ï¼Œé©—è­‰ä¸¦è¡ŒåŸ·è¡Œ
- **åˆ¤æ–·æ¨™æº–**: 
  - ç¸½æ™‚é–“ä¸è¶…éæœ€é•·ä»»å‹™æ™‚é–“ + é¡å¤–é–‹éŠ·
  - çµæ§‹åˆ†æï¼ˆ2sï¼‰èˆ‡ Keywords/Embeddings ä¸¦è¡Œ
  - resume_structure æ¬„ä½æ­£ç¢ºè¿”å›

#### RS-002-IT: API å›æ‡‰æ ¼å¼æ¸¬è©¦
- **åç¨±**: API Response Format é©—è­‰
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ API å›æ‡‰åŒ…å«æ­£ç¢ºçš„çµæ§‹æ¬„ä½
- **æ¸¬è©¦å…§å®¹**: æ¸¬è©¦æœ‰/ç„¡çµæ§‹è³‡æ–™çš„å›æ‡‰æ ¼å¼
- **åˆ¤æ–·æ¨™æº–**: 
  - IndexCalAndGapAnalysisData æ¨¡å‹æ¥å— resume_structure
  - standard_sections åŒ…å«æ‰€æœ‰æ¨™æº–å€æ®µ
  - å‘å¾Œç›¸å®¹ï¼šç„¡çµæ§‹æ™‚ä»å¯æ­£å¸¸å›æ‡‰

#### RS-003-IT: éŒ¯èª¤è™•ç†æµç¨‹æ¸¬è©¦
- **åç¨±**: Error Handling and Fallback é©—è­‰
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: æ¸¬è©¦éŒ¯èª¤æ¢å¾©å’Œ fallback æ©Ÿåˆ¶
- **æ¸¬è©¦å…§å®¹**: æ¨¡æ“¬çµæ§‹åˆ†ææœå‹™å¤±æ•—ï¼Œé©—è­‰ fallback
- **åˆ¤æ–·æ¨™æº–**: 
  - æœå‹™å¤±æ•—æ™‚ä½¿ç”¨ fallback çµæ§‹
  - å…¶ä»–æœå‹™æ­£å¸¸é‹ä½œä¸å—å½±éŸ¿
  - fallback çµæ§‹åŒ…å«åŸºæœ¬æ¬„ä½

#### RS-004-IT: åŠŸèƒ½é–‹é—œè¡Œç‚ºæ¸¬è©¦
- **åç¨±**: Feature Flag Enable/Disable é©—è­‰
- **å„ªå…ˆç´š**: P1
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: æ¸¬è©¦ ENABLE_RESUME_STRUCTURE_ANALYSIS åŠŸèƒ½é–‹é—œ
- **æ¸¬è©¦å…§å®¹**: æ¸¬è©¦é–‹å•Ÿ/é—œé–‰åŠŸèƒ½çš„ä¸åŒè¡Œç‚º
- **åˆ¤æ–·æ¨™æº–**: 
  - é–‹å•Ÿæ™‚ï¼šå›æ‡‰åŒ…å« resume_structure
  - é—œé–‰æ™‚ï¼šå›æ‡‰ä¸åŒ…å« resume_structure
  - é–‹é—œç‹€æ…‹ä¸å½±éŸ¿å…¶ä»–åŠŸèƒ½

#### RS-005-IT: ç«¯å°ç«¯ Mock æµç¨‹æ¸¬è©¦
- **åç¨±**: End-to-End Mock Flow å®Œæ•´é©—è­‰
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: å®Œæ•´æµç¨‹èˆ‡ mock æœå‹™æ¸¬è©¦
- **æ¸¬è©¦å…§å®¹**: ä½¿ç”¨å®Œæ•´ mock è³‡æ–™é©—è­‰æ‰€æœ‰å…ƒä»¶æ•´åˆ
- **åˆ¤æ–·æ¨™æº–**: 
  - æ‰€æœ‰æœå‹™å›æ‡‰æ­£ç¢ºæ•´åˆ
  - metadata åŒ…å« structure_analysis_enabled
  - å®Œæ•´å›æ‡‰çµæ§‹åŒ…å«æ‰€æœ‰å¿…è¦æ¬„ä½

### 6.3 æ¸¬è©¦å¯¦ä½œä½ç½®

- **å–®å…ƒæ¸¬è©¦**: `test/unit/test_resume_structure_analyzer.py`
- **æ•´åˆæ¸¬è©¦**: `test/integration/test_resume_structure_integration.py`

### 6.4 æ¸¬è©¦åŸ·è¡ŒæŒ‡ä»¤

```bash
# åŸ·è¡Œå–®å…ƒæ¸¬è©¦
pytest test/unit/test_resume_structure_analyzer.py -v

# åŸ·è¡Œæ•´åˆæ¸¬è©¦  
pytest test/integration/test_resume_structure_integration.py -v

# åŸ·è¡Œç‰¹å®šæ¸¬è©¦
pytest test/unit/test_resume_structure_analyzer.py::TestResumeStructureAnalyzer::test_RS_001_UT_basic_structure_analysis -v
```

## 7. Course Availability Check æ¸¬è©¦æ¡ˆä¾‹

### 7.1 å–®å…ƒæ¸¬è©¦ (CA-xxx-UT)

#### CA-001-UT: æ‰¹é‡ Embedding ç”Ÿæˆæ¸¬è©¦
- **åç¨±**: Batch Embedding Generation
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰æ‰¹é‡ç”Ÿæˆ embeddings åŠŸèƒ½
- **æ¸¬è©¦å…§å®¹**: Mock embedding serviceï¼Œæ¸¬è©¦ 3-6 å€‹æŠ€èƒ½çš„æ‰¹é‡è™•ç†
- **åˆ¤æ–·æ¨™æº–**:
  - ä¸€æ¬¡ API å‘¼å«ç”Ÿæˆæ‰€æœ‰ embeddings
  - è¿”å›æ•¸é‡èˆ‡è¼¸å…¥ä¸€è‡´
  - è™•ç†ç©ºåˆ—è¡¨ä¸å ±éŒ¯
  - æ­£ç¢ºæ‡‰ç”¨ SKILL/FIELD å·®ç•°åŒ–æ–‡æœ¬ç­–ç•¥

#### CA-002-UT: å–®ä¸€æŠ€èƒ½æŸ¥è©¢æ¸¬è©¦
- **åç¨±**: Single Skill Query Execution
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰å–®ä¸€æŠ€èƒ½çš„è³‡æ–™åº«æŸ¥è©¢
- **æ¸¬è©¦å…§å®¹**: Mock è³‡æ–™åº«é€£ç·šï¼Œæ¸¬è©¦ SQL æŸ¥è©¢é‚è¼¯èˆ‡å„ªå…ˆæ’åº
- **åˆ¤æ–·æ¨™æº–**:
  - æ­£ç¢ºè¿”å› has_courses å¸ƒæ—å€¼
  - course_count ä¸è¶…é 10
  - æŸ¥è©¢è¶…æ™‚æ‹‹å‡º TimeoutError
  - ä½¿ç”¨æ­£ç¢ºçš„ç›¸ä¼¼åº¦é–¾å€¼ï¼ˆSKILL: 0.30, FIELD: 0.25ï¼‰

#### CA-003-UT: å¿«å–æ©Ÿåˆ¶æ¸¬è©¦
- **åç¨±**: Popular Skills Cache Mechanism
- **å„ªå…ˆç´š**: P1
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ç†±é–€æŠ€èƒ½å¿«å–
- **æ¸¬è©¦å…§å®¹**: æ¸¬è©¦å¿«å–å‘½ä¸­èˆ‡æœªå‘½ä¸­å ´æ™¯
- **åˆ¤æ–·æ¨™æº–**:
  - ç†±é–€æŠ€èƒ½ç›´æ¥è¿”å›å¿«å–çµæœ
  - æœªå¿«å–æŠ€èƒ½é€²å…¥æŸ¥è©¢æµç¨‹
  - å¿«å–å‘½ä¸­ç‡çµ±è¨ˆæ­£ç¢º
  - Python, JavaScript ç­‰ç†±é–€æŠ€èƒ½åœ¨å¿«å–ä¸­

#### CA-004-UT: éŒ¯èª¤è™•ç†æ¸¬è©¦
- **åç¨±**: Graceful Degradation Error Handling
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ Graceful Degradation æ©Ÿåˆ¶
- **æ¸¬è©¦å…§å®¹**: æ¨¡æ“¬å„ç¨®éŒ¯èª¤å ´æ™¯
- **åˆ¤æ–·æ¨™æº–**:
  - å–®ä¸€å¤±æ•—ä¸å½±éŸ¿å…¶ä»–æŠ€èƒ½
  - å¤±æ•—æŠ€èƒ½æ¨™è¨˜ç‚º false/0
  - ç™¼é€æ­£ç¢ºçš„éŒ¯èª¤å‘Šè­¦
  - ç³»çµ±æ•´é«”å¤±æ•—æ™‚æ‰€æœ‰æŠ€èƒ½æ¨™è¨˜ç‚º false

#### CA-005-UT: ä¸¦è¡Œè™•ç†æ¸¬è©¦
- **åç¨±**: Parallel Processing with asyncio.gather
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ asyncio.gather ä¸¦è¡ŒåŸ·è¡Œ
- **æ¸¬è©¦å…§å®¹**: æ¸¬è©¦ 3-6 å€‹æŠ€èƒ½çš„ä¸¦è¡ŒæŸ¥è©¢
- **åˆ¤æ–·æ¨™æº–**:
  - æ‰€æœ‰æŸ¥è©¢ä¸¦è¡ŒåŸ·è¡Œ
  - å–®ä¸€ç•°å¸¸ä¸å½±éŸ¿å…¶ä»–
  - return_exceptions=True æ­£ç¢ºè™•ç†
  - åŸ·è¡Œæ™‚é–“æ˜é¡¯å°‘æ–¼ä¸²è¡Œè™•ç†

#### CA-006-UT: ç©ºæŠ€èƒ½åˆ—è¡¨è™•ç†æ¸¬è©¦
- **åç¨±**: Empty Skill List Handling
- **å„ªå…ˆç´š**: P2
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ç©ºåˆ—è¡¨è¼¸å…¥çš„è™•ç†
- **æ¸¬è©¦å…§å®¹**: å‚³å…¥ç©ºçš„æŠ€èƒ½æŸ¥è©¢åˆ—è¡¨
- **åˆ¤æ–·æ¨™æº–**:
  - è¿”å›ç©ºåˆ—è¡¨è€ŒééŒ¯èª¤
  - ä¸å‘¼å« embedding æˆ–è³‡æ–™åº«æœå‹™
  - å¿«é€Ÿè¿”å›ï¼ˆ< 10msï¼‰
  - ä¸ç”¢ç”Ÿä»»ä½•éŒ¯èª¤æ—¥èªŒ

#### CA-007-UT: è¶…æ™‚è™•ç†æ¸¬è©¦
- **åç¨±**: Timeout Handling Test
- **å„ªå…ˆç´š**: P1
- **é¡å‹**: å–®å…ƒæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰æŸ¥è©¢è¶…æ™‚çš„è™•ç†æ©Ÿåˆ¶
- **æ¸¬è©¦å…§å®¹**: æ¨¡æ“¬è³‡æ–™åº«æŸ¥è©¢è¶…æ™‚ï¼ˆ> 1ç§’ï¼‰
- **åˆ¤æ–·æ¨™æº–**:
  - æ­£ç¢ºæ•ç² TimeoutError
  - è¶…æ™‚çš„æŠ€èƒ½æ¨™è¨˜ç‚º unavailable
  - è¨˜éŒ„è­¦å‘Šæ—¥èªŒ
  - ä¸å½±éŸ¿å…¶ä»–æŠ€èƒ½çš„æŸ¥è©¢

### 7.2 æ•´åˆæ¸¬è©¦ (CA-xxx-IT)

#### CA-001-IT: API æ•´åˆæ¸¬è©¦
- **åç¨±**: Gap Analysis Integration
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰èˆ‡ Gap Analysis çš„æ•´åˆ
- **æ¸¬è©¦å…§å®¹**: Mock å®Œæ•´ API æµç¨‹ï¼Œé©—è­‰çµæœå¢å¼·
- **æ¸¬è©¦è³‡æ–™**:
  - Rust (SKILL): Systems programming language
  - Quantum Computing (FIELD): Quantum algorithms
- **åˆ¤æ–·æ¨™æº–**:
  - SkillSearchQueries åŒ…å«æ–°æ¬„ä½ (has_available_courses, course_count)
  - æ•¸å€¼åˆç†ï¼ˆ0-10ï¼‰
  - åŒ…å« preferred_count å’Œ other_count åˆ†è§£

#### CA-002-IT: ä¸¦è¡Œè™•ç†èˆ‡å·®ç•°åŒ–ç­–ç•¥æ¸¬è©¦
- **åç¨±**: Parallel Processing and Category Differentiation
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰ SKILL/FIELD å·®ç•°åŒ–è™•ç†
- **æ¸¬è©¦å…§å®¹**: æ¸¬è©¦ä¸åŒé¡åˆ¥çš„ embedding æ–‡æœ¬ç”Ÿæˆ
- **åˆ¤æ–·æ¨™æº–**:
  - SKILL é¡åˆ¥åŒ…å« "course project certificate" é—œéµè©
  - FIELD é¡åˆ¥åŒ…å« "specialization degree" é—œéµè©
  - ä¸¦è¡Œè™•ç†å¤šå€‹æŠ€èƒ½
  - æ­£ç¢ºæ‡‰ç”¨ä¸åŒçš„ç›¸ä¼¼åº¦é–¾å€¼

#### CA-003-IT: å„ªé›…é™ç´šæ¸¬è©¦
- **åç¨±**: Graceful Degradation on Service Failure
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰æœå‹™å¤±æ•—æ™‚çš„æ¢å¾©
- **æ¸¬è©¦å…§å®¹**: æ¨¡æ“¬ Embedding/DB æœå‹™å¤±æ•—
- **åˆ¤æ–·æ¨™æº–**:
  - ä¸» API ç¹¼çºŒé‹ä½œ
  - æŠ€èƒ½æ¨™è¨˜ç‚º false
  - éŒ¯èª¤å‘Šè­¦æ­£ç¢ºç™¼é€
  - ä¸ä¸­æ–·ä¸»è¦ Gap Analysis æµç¨‹

#### CA-004-IT: è³‡æ–™åº«é€£ç·šå¤±æ•—æ¸¬è©¦
- **åç¨±**: Database Connection Failure Handling
- **å„ªå…ˆç´š**: P1
- **é¡å‹**: æ•´åˆæ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: é©—è­‰è³‡æ–™åº«é€£ç·šå¤±æ•—çš„è™•ç†
- **æ¸¬è©¦å…§å®¹**: Mock connection pool æ‹‹å‡ºç•°å¸¸
- **åˆ¤æ–·æ¨™æº–**:
  - æœå‹™ä¸å´©æ½°
  - è¿”å› false/0 ä½œç‚ºé è¨­å€¼
  - æ­£ç¢ºè¨˜éŒ„éŒ¯èª¤æ—¥èªŒ
  - Graceful degradation æ©Ÿåˆ¶å•Ÿå‹•

### 7.3 æ•ˆèƒ½æ¸¬è©¦ (CA-xxx-PT)

#### CA-001-PT: 6 æŠ€èƒ½æ•ˆèƒ½æ¸¬è©¦
- **åç¨±**: 6-Skill Performance Test
- **å„ªå…ˆç´š**: P0
- **é¡å‹**: æ•ˆèƒ½æ¸¬è©¦
- **æ¸¬è©¦ç›®æ¨™**: æ¸¬è©¦ 6 å€‹æŠ€èƒ½ä¸¦è¡ŒæŸ¥è©¢çš„æ•ˆèƒ½è¡¨ç¾
- **æ¸¬è©¦å…§å®¹**:
  - å›ºå®š 6 å€‹æŠ€èƒ½ï¼ˆ3 SKILL + 3 FIELD é¡åˆ¥ï¼‰
  - é€£çºŒåŸ·è¡Œ 20 æ¬¡è¿­ä»£
  - æ¯æ¬¡è¿­ä»£éƒ½æ˜¯ 6 å€‹æŠ€èƒ½çš„ä¸¦è¡ŒæŸ¥è©¢
  - è¨ˆç®— P50ã€P95ã€å¹³å‡å€¼ç­‰çµ±è¨ˆæ•¸æ“š
- **æ¸¬è©¦è³‡æ–™**: çœŸå¯¦å­˜åœ¨çš„æŠ€èƒ½ï¼ˆPython, Docker, React, Machine Learning, Data Science, Cloud Computingï¼‰
- **åˆ¤æ–·æ¨™æº–**:
  - P50 < 500msï¼ˆä½¿ç”¨çœŸå¯¦ APIï¼‰
  - P95 < 1000msï¼ˆä½¿ç”¨çœŸå¯¦ APIï¼‰
  - ç”Ÿæˆè©³ç´° JSON å ±å‘Š

### 7.4 æ¸¬è©¦å¯¦ä½œä½ç½®

```
test/
â”œâ”€â”€ unit/
â”‚   â””â”€â”€ services/
â”‚       â””â”€â”€ test_course_availability.py         # 7 å€‹å–®å…ƒæ¸¬è©¦
â””â”€â”€ integration/
    â””â”€â”€ test_course_availability_integration.py # 4 å€‹æ•´åˆæ¸¬è©¦
â””â”€â”€ performance/
    â””â”€â”€ test_course_availability_performance.py  # 3 å€‹æ•ˆèƒ½æ¸¬è©¦ï¼ˆå·²ä¿®å¾©ï¼‰
```

### 7.5 æ¸¬è©¦åŸ·è¡ŒæŒ‡ä»¤

```bash
# åŸ·è¡Œæ‰€æœ‰èª²ç¨‹å¯ç”¨æ€§æ¸¬è©¦
pytest test/unit/services/test_course_availability.py -v
pytest tests/integration/test_course_availability_integration.py -v

# åŸ·è¡Œç‰¹å®šæ¸¬è©¦
pytest test/unit/services/test_course_availability.py::TestCourseAvailability::test_CA_001_UT_batch_embedding_generation -v

# åŸ·è¡Œæ•ˆèƒ½æ¸¬è©¦
./test/scripts/run_course_availability_performance.sh

# åŸ·è¡Œç‰¹å®šæ•ˆèƒ½æ¸¬è©¦
pytest test/performance/test_course_availability_performance.py::TestCourseAvailabilityPerformance::test_CA_001_PT_progressive_performance -v

# åŸ·è¡ŒçœŸå¯¦ API æ¸¬è©¦ï¼ˆéœ€è¦ API keysï¼‰
pytest test/performance/test_course_availability_performance.py -m real_api -v
pytest test/performance/test_course_availability_performance.py -v --real-api
```

## 8. å®Œæ•´æ€§èƒ½æ¸¬è©¦å¥—ä»¶ (Performance Test Suite)

### 8.1 å·¥å…·ç°¡ä»‹

**performance_test_suite.py** æ˜¯ä¸€å€‹åŠŸèƒ½å®Œæ•´çš„æ€§èƒ½æ¸¬è©¦å·¥å…·ï¼Œå°ˆé–€ç”¨æ–¼åˆ†æ Index-Cal-Gap-Analysis API çš„æ•ˆèƒ½è¡¨ç¾ã€‚

#### ä¸»è¦åŠŸèƒ½
- âœ… æ”¯æ´ 1-20 æ¬¡å¯é…ç½®æ¸¬è©¦åŸ·è¡Œ
- âœ… è‡ªå‹•æå–å®Œæ•´çš„ timing breakdown
- âœ… ç”Ÿæˆ Gantt Chart é¡¯ç¤ºä¸¦è¡Œ/é †åºåŸ·è¡Œ
- âœ… ç”Ÿæˆçµ„ä»¶æ™‚é–“åˆ†æåœ–è¡¨
- âœ… è¨ˆç®— P50ã€P95 ç­‰çµ±è¨ˆæŒ‡æ¨™
- âœ… è¼¸å‡ºè©³ç´° JSON çµæœ

### 8.2 ä½¿ç”¨æ–¹å¼

#### åŸºæœ¬æŒ‡ä»¤
```bash
# å¿«é€Ÿæ¸¬è©¦ï¼ˆ1 æ¬¡ï¼‰
python test/performance/performance_test_suite.py --tests 1

# æ¨™æº–æ¸¬è©¦ï¼ˆ5 æ¬¡ï¼Œé è¨­ï¼‰
python test/performance/performance_test_suite.py

# ä¸­ç­‰æ¸¬è©¦ï¼ˆ10 æ¬¡ï¼‰
python test/performance/performance_test_suite.py --tests 10

# å®Œæ•´æ¸¬è©¦ï¼ˆ20 æ¬¡ï¼‰
python test/performance/performance_test_suite.py --tests 20

# ä¸ç”Ÿæˆåœ–è¡¨ï¼ˆåƒ… JSONï¼‰
python test/performance/performance_test_suite.py --tests 5 --no-charts

# æŒ‡å®šè¼¸å‡ºç›®éŒ„
python test/performance/performance_test_suite.py --output-dir ./results
```

#### å‘½ä»¤è¡Œåƒæ•¸
| åƒæ•¸ | èªªæ˜ | é è¨­å€¼ |
|------|------|--------|
| `--tests N` | æ¸¬è©¦æ¬¡æ•¸ (1-20) | 5 |
| `--output-dir` | çµæœè¼¸å‡ºç›®éŒ„ | docs/issues/index-cal-gap-analysis-evolution/performance |
| `--no-charts` | è·³éåœ–è¡¨ç”Ÿæˆ | False |

### 8.3 è¼¸å‡ºæª”æ¡ˆ

#### ç”Ÿæˆçš„æª”æ¡ˆ
1. **JSON çµæœæª”æ¡ˆ**: `performance_test_YYYYMMDD_HHMMSS.json`
   - å®Œæ•´æ¸¬è©¦æ•¸æ“š
   - çµ±è¨ˆåˆ†æçµæœ
   - æ¯å€‹æ¸¬è©¦çš„è©³ç´° timing breakdown

2. **Gantt Chart**: `gantt_chart_YYYYMMDD_HHMMSS.png`
   - è¦–è¦ºåŒ–ä¸¦è¡ŒåŸ·è¡Œéšæ®µ
   - é¡¯ç¤ºé †åºåŸ·è¡Œéšæ®µ
   - æ¨™è¨»å„çµ„ä»¶åŸ·è¡Œæ™‚é–“

3. **çµ„ä»¶åˆ†æåœ–è¡¨**: `component_analysis_YYYYMMDD_HHMMSS.png`
   - é¤…åœ–ï¼šæ™‚é–“åˆ†ä½ˆ
   - ç®±ç·šåœ–ï¼šä¸»è¦çµ„ä»¶è®Šç•°
   - æŠ˜ç·šåœ–ï¼šæ€§èƒ½è¶¨å‹¢
   - å †ç–ŠæŸ±ç‹€åœ–ï¼šçµ„ä»¶åˆ†è§£

### 8.4 Timing Breakdown è§£æ

#### ä¸¦è¡ŒåŸ·è¡Œçµ„ä»¶ï¼ˆåŒæ™‚é–‹å§‹ï¼‰
- **structure_analysis_time**: Resume Structure Analyzer (GPT-4.1 mini)
- **keyword_matching_time**: é—œéµå­—åŒ¹é…
- **embedding_time**: å‘é‡åµŒå…¥ç”Ÿæˆ
- **pgvector_warmup_time**: å‘é‡è³‡æ–™åº«é ç†±

#### é †åºåŸ·è¡Œçµ„ä»¶ï¼ˆä¾åºåŸ·è¡Œï¼‰
- **index_calculation_time**: åŒ¹é…æŒ‡æ•¸è¨ˆç®—
- **gap_analysis_time**: å·®è·åˆ†æ (GPT-4.1)
- **course_availability_time**: èª²ç¨‹å¯ç”¨æ€§æª¢æŸ¥

#### å…¶ä»–æ™‚é–“æŒ‡æ¨™
- **structure_wait_time**: Structure Analysis å®Œæˆå¾Œçš„ç­‰å¾…æ™‚é–“
- **total_time**: API ç¸½å›æ‡‰æ™‚é–“

### 8.5 JSON è¼¸å‡ºæ ¼å¼

```json
{
  "timestamp": "20250816_145615",
  "test_date": "2025-08-16T14:56:15",
  "configuration": {
    "num_tests": 5,
    "api_endpoint": "/api/v1/index-cal-and-gap-analysis",
    "api_url": "https://...",
    "test_cases_used": 5
  },
  "statistics": {
    "total_tests": 5,
    "successful_tests": 5,
    "failed_tests": 0,
    "success_rate": 100.0,
    "total_time_stats": {
      "p50": 7.25,
      "p95": 8.94,
      "mean": 7.00,
      "min": 4.84,
      "max": 8.94
    },
    "component_stats": {
      "structure_analysis_time": {
        "median": 1337,
        "p50": 1337,
        "p95": 1500,
        "mean": 1320,
        "min": 1200,
        "max": 1500,
        "samples": 5
      },
      "gap_analysis_time": {...},
      ...
    }
  },
  "test_details": [
    {
      "test_id": "001",
      "company": "TSMC",
      "position": "Senior Data Analyst",
      "success": true,
      "total_time_seconds": 7.5,
      "timings_ms": {
        "structure_analysis_time": 1305,
        "gap_analysis_time": 6281,
        ...
      }
    }
  ]
}
```

### 8.6 æ•ˆèƒ½åŸºæº–ç·š

æ ¹æ“šæ¸¬è©¦çµæœï¼Œä»¥ä¸‹æ˜¯é æœŸçš„æ•ˆèƒ½åŸºæº–ï¼š

| çµ„ä»¶ | P50 (ä¸­ä½æ•¸) | P95 | ä½”ç¸½æ™‚é–“æ¯”ä¾‹ |
|------|-------------|-----|-------------|
| Gap Analysis | 4500-6500ms | 7000-8000ms | 60-75% |
| Structure Analysis | 1200-1500ms | 1600-2000ms | 15-20% |
| Course Availability | 1000-1500ms | 1800-2500ms | 10-15% |
| Index Calculation | 100-200ms | 250-350ms | 2-3% |
| Embedding | 100-150ms | 200-300ms | 1-2% |
| Keywords | 10-20ms | 30-50ms | <1% |
| **ç¸½å›æ‡‰æ™‚é–“** | 7-8s | 9-11s | 100% |

### 8.7 æ€§èƒ½åˆ†æé‡é»

#### å¾ Gantt Chart è§€å¯Ÿ
1. **ä¸¦è¡Œå„ªåŒ–æ•ˆæœ**: Structure Analysis èˆ‡å…¶ä»–çµ„ä»¶ä¸¦è¡Œï¼Œç¯€çœç´„ 1.3 ç§’
2. **ä¸»è¦ç“¶é ¸**: Gap Analysis ä½”ç”¨ 60-75% çš„ç¸½æ™‚é–“
3. **Wait Time**: Structure é€šå¸¸æå‰å®Œæˆï¼Œæœ‰ 2-3 ç§’ç­‰å¾…æ™‚é–“

#### å¾çµ„ä»¶åˆ†æè§€å¯Ÿ
1. **æ™‚é–“åˆ†ä½ˆ**: Gap Analysis æ˜¯ä¸»è¦æ™‚é–“æ¶ˆè€—è€…
2. **ç©©å®šæ€§**: Structure Analysis å’Œ Gap Analysis æ™‚é–“è¼ƒç©©å®š
3. **è®Šç•°æ€§**: Course Availability æ™‚é–“è®Šç•°è¼ƒå¤§ï¼ˆå–æ±ºæ–¼æŠ€èƒ½æ•¸é‡ï¼‰

### 8.8 æ•…éšœæ’é™¤

#### å¸¸è¦‹å•é¡Œ
1. **HTTP 422 éŒ¯èª¤**: ç¢ºä¿æ¸¬è©¦è³‡æ–™ï¼ˆJD å’Œ Resumeï¼‰é•·åº¦ â‰¥ 200 å­—å…ƒ
2. **Timeout éŒ¯èª¤**: API å›æ‡‰è¶…é 30 ç§’ï¼Œå¯èƒ½æ˜¯ç¶²è·¯æˆ–æœå‹™å•é¡Œ
3. **åœ–è¡¨ç”Ÿæˆå¤±æ•—**: ç¢ºä¿å·²å®‰è£ matplotlib (`pip install matplotlib`)

#### é™¤éŒ¯å»ºè­°
```bash
# å–®æ¬¡æ¸¬è©¦é™¤éŒ¯
python test/performance/performance_test_suite.py --tests 1

# æŸ¥çœ‹è©³ç´°è¼¸å‡º
python test/performance/performance_test_suite.py --tests 1 2>&1 | tee debug.log

# æª¢æŸ¥ API é€£ç·š
curl -X GET https://airesumeadvisor-api-production.calmisland-ea7fe91e.japaneast.azurecontainerapps.io/health
```

### 8.9 èˆ‡å…¶ä»–æ•ˆèƒ½æ¸¬è©¦çš„æ¯”è¼ƒ

| æ¸¬è©¦å·¥å…· | ç”¨é€” | æ¸¬è©¦æ•¸é‡ | è¼¸å‡º |
|---------|------|---------|------|
| `performance_test_suite.py` | å®Œæ•´æ€§èƒ½åˆ†æ | 1-20 æ¬¡å¯é…ç½® | JSON + Gantt + åˆ†æåœ– |
| `run_v101_test.py` | v1.0.1 ç‰ˆæœ¬æ¸¬è©¦ | å›ºå®š 20 æ¬¡ | JSON only |
| `create_comparison_report.py` | ç‰ˆæœ¬æ¯”è¼ƒ | N/A | æ¯”è¼ƒåœ–è¡¨ |
| `test_gap_analysis_v2_performance.py` | å–®å…ƒæ•ˆèƒ½æ¸¬è©¦ | 20 æ¬¡ | JSON report |

### 8.10 æœ€ä½³å¯¦è¸

1. **æ¸¬è©¦é »ç‡å»ºè­°**
   - æ—¥å¸¸é–‹ç™¼ï¼š1-5 æ¬¡å¿«é€Ÿæ¸¬è©¦
   - ç‰ˆæœ¬ç™¼å¸ƒå‰ï¼š10 æ¬¡æ¨™æº–æ¸¬è©¦
   - æ€§èƒ½åŸºæº–å»ºç«‹ï¼š20 æ¬¡å®Œæ•´æ¸¬è©¦

2. **è³‡æ–™é¸æ“‡**
   - ä½¿ç”¨çœŸå¯¦å ´æ™¯çš„ JD å’Œ Resume
   - ç¢ºä¿è³‡æ–™é•·åº¦ç¬¦åˆ API è¦æ±‚ï¼ˆâ‰¥ 200 å­—å…ƒï¼‰
   - åŒ…å«å¤šæ¨£åŒ–çš„è·ä½é¡å‹

3. **çµæœè§£è®€**
   - é—œæ³¨ P50 è€Œéå¹³å‡å€¼ï¼ˆæ›´ç©©å®šï¼‰
   - P95 ç”¨æ–¼è©•ä¼°æœ€å·®æƒ…æ³
   - è§€å¯Ÿè¶¨å‹¢è€Œéå–®æ¬¡çµæœ

---

**æ–‡æª”çµæŸ** - ç‰ˆæœ¬ 2.1.0 | æ‰€æœ‰æ¸¬è©¦å·²å®Œæˆé©—è­‰ âœ… | æ–°å¢å®Œæ•´æ€§èƒ½æ¸¬è©¦å¥—ä»¶